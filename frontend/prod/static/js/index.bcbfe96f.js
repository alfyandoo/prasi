(()=>{"use strict";var t={241:function(t,e,r){var n,o,a=r("704"),i=r("195");let s=window;var l=r("904");BigInt.prototype.toJSON=function(){return"BigInt::"+this.toString()};let u="undefined"!=typeof window?window:null,c=void 0!==r.g?r.g:void 0,p=async(t,e,r,n)=>{let o={...r},a=null,i=!1,s=null,p=[];if(Array.isArray(e))for(let t of e)t instanceof File&&(p.push(t),i=!0),"function"==typeof t&&(s=t);else e instanceof File&&(i=!0,p.push(e));if(i){let t=new FormData;for(let e of p)t.append(e.name,e);a=t,delete o["content-type"],o.enctype="multipart/form-data;"}else a=JSON.stringify(e),o["content-type"]="aplication/json";let f=new URL(t);if(null!==u){let t=new URL(location.href),r="";if(r=f.host===t.host||c&&"function"==typeof c.server_hook?f.toString():`${t.protocol}//${t.host}/_proxy/${encodeURIComponent(f.toString())}`){if(s)return(await (0,l.Z)({method:e?"post":void 0,url:r,data:a,onUploadProgress:s})).data;{let t=await fetch(r,e?{method:"POST",body:a,headers:o}:void 0),i=await t.text();if(!1===n)return i;try{return JSON.parse(i,d)}catch(t){return i}}}}let h=await fetch(f,e?{method:"POST",body:a,headers:o}:void 0),m=await h.text();try{return JSON.parse(m,d)}catch(t){return m}},d=(t,e)=>"string"==typeof e&&e.startsWith("BigInt::")?BigInt(e.substring(8)):e,f=t=>{let e=new URL(t);if(null!==u){let t=new URL(location.href),r="";return r=e.host===t.host||c&&"function"==typeof c.server_hook?e.toString():`${t.protocol}//${t.host}/_proxy/${encodeURIComponent(e.toString())}`}return e};var h=r("72"),m=r.n(h);let y=async(t,e)=>{let r=m()(t,"/");await new Promise(t=>{let n=document,o=n.createElement("script");o.onload=async()=>{t()},!localStorage.getItem("api-ts-"+r)&&localStorage.setItem("api-ts-"+r,Date.now().toString());let a=new URL(r),i=new URL(location.href);i.hash="",a.hash="";let s="";a.host!==i.host&&(s="&remote=1"),i.pathname="";let l=m()(i.toString(),"/");e?o.src=`${l}/_prasi/load.js?url=${r}&v3&dev=1${s}`:o.src=`${l}/_prasi/load.js?url=${r}&v3${s}`,o.onerror=()=>{t()},document.querySelector(`script[src="${o.src}"]`)?t():n.body.appendChild(o)})},g={},v=t=>{!s.prasiApi&&(s.prasiApi={});try{let e=new URL(t),r=`${e.protocol}//${e.host}`;return!s.prasiApi[r]&&!g[r]&&(g[r]=y(r,location.hostname.includes("prasi"))),new Proxy({},{get:(t,e)=>{if("_url"===e)return(t,e)=>{let n=new URL(r);n.pathname=t.split("/").filter(t=>t).join("/");let o=new URL(location.href),a="";return a=n.host===o.host||!1===e?n.toString():`${o.protocol}//${o.host}/_proxy/${encodeURIComponent(n.toString())}`};let n=t=>function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return new Promise(async(e,o)=>{try{let a=s.prasiApi[r];if(!a&&g&&"object"==typeof g[r]&&(await g[r],a=s.prasiApi[r]),a){if(0===Object.keys(a).length){let o=`${r}/${t}`,a=await w(o,n);e(a);return}if("_raw"===t){let t=n[0],o=`${r}${t}`,a=await w(o,n.slice(1));e(a);return}if(!a.apiEntry&&(a.apiEntry={}),a.apiEntry&&!a.apiEntry[t]){o(`API ${t.toString()} not found, existing API: 
   - ${Object.keys(a.apiEntry||{}).join("\n   - ")}`);return}let i=a.apiEntry[t].url,s=a.apiEntry[t].args;if(i&&s){if(n.length>0&&s.length>0)for(let[t,e]of Object.entries(n)){let r=s[parseInt(t)];if(!(s&&s.includes(r))||!e||"string"==typeof e||"number"==typeof e)i=(i=i.replace(`:${r}?`,e+"")).replace(`:${r}`,e+"")}let t=`${r}${i}`,o=await w(t,n);e(o)}else console.error(`API Not Found: ${t.toString()}`)}else o("Failed to load API [Proxy]: "+r)}catch(t){o(t)}})};return"then"===e?new Proxy({},{get:(t,e)=>n(e)}):n(e)}})}catch(t){return null}},w=async(t,e)=>await p(t,e,{"content-type":"application/json"});var b=r("675"),_=r.n(b),S=r("14"),j=r("226"),x=r("839");let $={tables:{},columns:{},rels:{}},C={},O=t=>(!C[t]&&R({table:"check",action:"check"},t).then(e=>{e&&"encrypted"===e.mode?C[t]="msgpack":C[t]="json"}),new Proxy({},{get:(e,r)=>"_batch"===r?{update:async e=>R({name:"",action:"batch_update",table:"",params:{batch:e}},t),upsert:async e=>R({name:"",action:"batch_upsert",table:"",params:{arg:e}},t)}:"_schema"===r?{tables:async()=>(!$.tables[t]&&($.tables[t]=R({name:"",action:"schema_tables",table:"",params:[]},t)),await $.tables[t]),columns:async e=>(!$.columns[t+"_"+e]&&($.columns[t+"_"+e]=R({name:"",action:"schema_columns",table:e,params:[]},t)),await $.columns[t+"_"+e]),rels:async e=>(!$.rels[t+"_"+e]&&($.rels[t+"_"+e]=R({name:"",action:"schema_rels",table:e,params:[]},t)),await $.rels[t+"_"+e])}:r.startsWith("$")?function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];let a=x.ZP.gzip(JSON.stringify(n));return R({name:"",action:"query",table:r,params:btoa(a.reduce((t,e)=>t+String.fromCharCode(e),""))},t)}:new Proxy({},{get:(e,n)=>async function(){for(var e=arguments.length,o=Array(e),a=0;a<e;a++)o[a]=arguments[a];return"query"===r&&(r=n,n="query"),await R({name:"",action:n,table:r,params:o},t)}})})),P={},R=async(t,e)=>{let r=new URL(e);r.pathname="/_dbs";let n=t||{};n.table&&(r.pathname+=`/${n.table}`);let o=r.toString();"undefined"!=typeof localStorage&&localStorage.mlsid&&(n.mlsid=localStorage.mlsid);let a=_()({...n,dburl:e}),i=!1;"undefined"!=typeof location&&r.hostname!==location.hostname&&window.isEditor&&["prasi.avolut.com","localhost:4550","127.0.0.1:4550"].includes(location.host)&&(i=!0);let s=async()=>{let t=n,r=null;if("msgpack"===C[e]){t=(0,x.iv)((0,j.P2)(n),{});let e=await fetch(f(o),{method:"POST",body:t});r=await e.json()}else r=await p(o,t,{"content-type":"application/json"},!1);try{if("string"==typeof r)return JSON.parse(r)}catch(t){}return r};if(i){let t=await (0,S.U2)(`editor-db-cache-${a}`);return t?!P[a]&&(s().then(t=>{(0,S.t8)(`editor-db-cache-${a}`,t)}),P[a]=!0):(t=await s(),P[a]=!0,(0,S.t8)(`editor-db-cache-${a}`,t)),t}return await s()};var A=r("927");let L=window,U={root:null,url(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];let n=e.map(t=>Array.isArray(t)?t.join(""):t).join(""),o=this.root.toString();return(o.endsWith("/")&&(o=o.substring(0,o.length-1)),n.startsWith("/"))?o+n:o+"/"+n},get pathname(){let t=location.pathname.substring(U.root.pathname.length);if(!t.startsWith("/"))return`/${t}`;return t},site:{id:null===(o=L._prasi)||void 0===o?void 0:o.site_id},init_local_effect:{},mode:"",route:{status:"init",pages:[],router:null},comp:{list:{},pending:{}},layout:{id:"",root:null},cache:{urls:new Set},page:{id:"",url:"",root:null,cache:{}}},k=()=>{if(!U.root){let t=new URL(location.href);L._prasi.basepath&&(t.pathname=L._prasi.basepath),U.root=new URL(`${t.protocol}//${t.host}${t.pathname}`),U.root.pathname.endsWith("/")&&(U.root.pathname=U.root.pathname.substring(0,U.root.length-1))}},E={route:null,promise:null},N=()=>E.promise?E.promise:(E.promise=new Promise(async t=>{E.route&&t(E.route);let e=await fetch(U.url`_prasi/route`);!e.headers.get("content-encoding")&&fetch(U.url`_prasi/compress/only-gz`),E.route=await e.json(),t(E.route)}),E.promise),I=async()=>{let t=(0,A.p7)(),e=[];try{let r=await N();if(r&&r.site&&r.urls){r.layout&&(U.layout.id=r.layout.id,U.layout.root=r.layout.root),U.site=r.site,U.site.code={mode:"vsc"},U.site.api=v(U.site.api_url),U.site.db=O(U.site.api_url);let n=window;for(let o of(n.serverurl=U.site.api_url,n.db=U.site.db,n.api=U.site.api,r.urls))t.insert(o.url,o),e.push(o)}}catch(t){}return{router:t,pages:e}};var T=r("855"),F=r("902");let W={ctx:{},render(){}},B=(0,F.createContext)(W),J=t=>{let{children:e}=t,[r,n]=(0,F.useState)({});return(0,a.jsx)(B.Provider,{value:{...W,render(){n({})}},children:e})},D=(t,e,r,n,o)=>new Proxy({},{get:(a,i,s)=>function(){for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];t.mounted&&n((0,T.Uy)(r,a=>{o({ref:e,state:a,current:T.Vk,update(t){n((0,T.Uy)(r,e=>{t(e)}))}})[i].bind(D(t,e,r,n,o))(...s)}))}});let q=(n={name:"prod-store",ref:{router:null},state:{pages:null,status:{router:"init"}},action:t=>{let{state:e,update:r,ref:n}=t;return{init(){"init"===e.status.router&&(e.status.router="loading",I().then(t=>{let{router:e,pages:o}=t;r(t=>{t.status.router="ready",n.router=e,t.pages=o})}))}}}},t=>{let e=(0,F.useRef)({mounted:!0}),r=(0,F.useContext)(B),o=r.ctx,a=r.render;!o[n.name]&&(o[n.name]={state:n.state,ref:n.ref||{}});let i=o[n.name].state,s=o[n.name].ref,l=t=>{o[n.name].state=t,a()},u=t({ref:s,state:i,action:D(e.current,s,i,l,n.action)});if(n.effect)for(let t of n.effect({state:i}))(0,F.useEffect)(()=>(e.current.mounted=!0,t.effect({action:D(e.current,s,i,l,n.action),state:i,update(t){l((0,T.Uy)(i,t))}}),()=>{e.current.mounted=!1,t.cleanup&&t.cleanup()}),t.deps);return(0,F.useEffect)(()=>(e.current.mounted=!0,()=>{e.current.mounted=!1}),Object.values(u)),{...u}}),M=()=>{let{router:t,status:e,init:r}=q(t=>{let{ref:e,state:r,action:n}=t;return{router:e.router,status:r.status,init:n.init}});return"init"===e.router&&r(),console.log("router"),(0,a.jsxs)(a.Fragment,{children:[e.router,null==t?void 0:t.ctx.rootNode.type]})},V=()=>4===location.hostname.split(".").length||"prasi.app"===location.hostname||"prasi.avolut.com"===location.hostname||location.hostname.includes("ngrok")||"localhost"===location.hostname||"127.0.0.1"===location.hostname||"10.0.2.2"===location.hostname,z=()=>{let{status:t,RenderBoundary:e}=q(t=>{let{state:e,action:r}=t;return{status:e.status.router}});return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(e,{children:[Date.now(),t,(0,a.jsx)("hr",{}),(0,a.jsx)(M,{})]})})};var X=r("931");r("189");let Z=(t,e)=>new Promise(async r=>{if("function"==typeof t){let n=null;if(e&&(n=setTimeout(r,e)),await t()){clearTimeout(n),r();return}let o=setInterval(async()=>{await t()&&(n&&clearTimeout(n),clearInterval(o),r())},10)}else"number"==typeof t&&setTimeout(()=>{r()},t)}),H=async function(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0],e="object"==typeof window?window:globalThis;t&&await Z(()=>e.__SRV_URL__),e.prasiContext={global:{},render(){}};let r=window.location,n=0===r.protocol.indexOf("http")?r.hostname:"localhost",o="https:"!=r.protocol||/localhost|127.0.0.1|0.0.0.0/.test(n)?"http":"https";if(e.__SRV_URL__){e.serverurl=e.__SRV_URL__;let t=new URL(e.serverurl);("localhost"===t.hostname||"127.0.0.1"===t.hostname)&&(t.hostname=r.hostname,t.pathname="/"===t.pathname?"":t.pathname,e.serverurl=t.toString(),e.serverurl.endsWith("/")&&(e.serverurl=e.serverurl.substring(0,e.serverurl.length-1)))}let a=r.port;e.baseurl=o+"://"+n+(a?":"+a:"")+"/",!e.basepath&&(e.basepath="/"),e.css=X.iv,e.extractCss=X.QV,e.pathname=r.pathname,e.cx=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];let n=[];return e.filter(t=>{if(t)return!!("string"==typeof t&&t.trim())||!0;return!1}).forEach(t=>{if(Array.isArray(t))for(let e of t)"string"==typeof e&&e.trim()&&n.push(e.trim());else n.push(t.trim())}),n.join(" ")},e.navigate=t=>{let r=t;if("function"==typeof e.navigateOverride&&!(r=e.navigateOverride(t)))return null;history.pushState({prevUrl:window.location.href},"",r),e.pathname=t,e.prasiContext&&e.prasiContext.render&&e.prasiContext.render()},"object"==typeof window&&window.addEventListener("popstate",()=>{let t=navigator.serviceWorker.controller;if(t&&t.postMessage({type:"add-cache",url:r.href}),e.prasiContext.popState){e.prasiContext.popState();return}if(e.preventPopRender){e.preventPopRender=!1;return}e.prasiContext&&e.prasiContext.render&&(e.pathname=r.pathname,e.prasiContext.render())})};var K=r("350"),Q=r("572");let G=()=>{let t="object"==typeof window?window:globalThis;t.React=F,t.ReactDOM=K,t.JSXRuntime=a,t.JSXDevRuntime=Q,t.Fragment=F.Fragment};(async()=>{r.e("53").then(r.bind(r,623));let t=document.getElementById("root");if(k(),t){await H(!1);let e={root:(0,i.createRoot)(t)};G();try{let t="/_prasi/code/internal.js",e=t;if(location.pathname.startsWith("/prod")){let r=location.pathname.split("/");e=`/prod/${r[2]}${t}`}let r=!1;try{let t=Function(`return import("${e}")`);r=await t()}catch(t){console.error(t)}"object"==typeof r&&(r.Loading&&(L.ContentLoading=r.Loading),r.NotFound&&(L.ContentNotFound=r.NotFound))}catch(t){}L.navigateOverride=t=>{if(t&&t.startsWith("/")&&V()&&location.pathname.startsWith("/prod")&&!t.startsWith("/prod")){let e=location.pathname.split("/");t=`/prod/${e[2]}${t}`}return t},e.root.render((0,a.jsx)(J,{children:(0,a.jsx)(z,{})})),document.body.classList.contains("opacity-0")&&document.body.classList.remove("opacity-0")}})()}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={exports:{}};return t[n](a,a.exports,r),a.exports}r.m=t,r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.f={},r.e=function(t){return Promise.all(Object.keys(r.f).reduce(function(e,n){return r.f[n](t,e),e},[]))},r.u=function(t){return"static/js/async/"+t+".edf28883.js"},r.miniCssF=function(t){return"static/css/async/"+t+".1895fb22.css"},r.h=function(){return"94f56e841ab56c51"},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},(()=>{var t={};r.l=function(e,n,o,a){if(t[e]){t[e].push(n);return}if(void 0!==o){for(var i,s,l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var c=l[u];if(c.getAttribute("src")==e){i=c;break}}}!i&&(s=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,r.nc&&i.setAttribute("nonce",r.nc),i.src=e),t[e]=[n];var p=function(r,n){i.onerror=i.onload=null,clearTimeout(d);var o=t[e];if(delete t[e],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach(function(t){return t(n)}),r)return r(n)},d=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),s&&document.head.appendChild(i)}})(),r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t=[];r.O=function(e,n,o,a){if(n){a=a||0;for(var i=t.length;i>0&&t[i-1][2]>a;i--)t[i]=t[i-1];t[i]=[n,o,a];return}for(var s=1/0,i=0;i<t.length;i++){for(var n=t[i][0],o=t[i][1],a=t[i][2],l=!0,u=0;u<n.length;u++)(!1&a||s>=a)&&Object.keys(r.O).every(function(t){return r.O[t](n[u])})?n.splice(u--,1):(l=!1,a<s&&(s=a));if(l){t.splice(i--,1);var c=o();void 0!==c&&(e=c)}}return e}})(),r.p="/nova/",r.rv=function(){return"1.0.5"},(()=>{if("undefined"!=typeof document){var t=function(t,e,n,o,a){var i=document.createElement("link");return i.rel="stylesheet",i.type="text/css",r.nc&&(i.nonce=r.nc),i.onerror=i.onload=function(r){if(i.onerror=i.onload=null,"load"===r.type)o();else{var n=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.href||e,l=Error("Loading CSS chunk "+t+" failed.\\n("+s+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=n,l.request=s,i.parentNode&&i.parentNode.removeChild(i),a(l)}},i.href=e,n?n.parentNode.insertBefore(i,n.nextSibling):document.head.appendChild(i),i},e=function(t,e){for(var r=document.getElementsByTagName("link"),n=0;n<r.length;n++){var o=r[n],a=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(a===t||a===e))return o}for(var i=document.getElementsByTagName("style"),n=0;n<i.length;n++){var o=i[n],a=o.getAttribute("data-href");if(a===t||a===e)return o}},n={980:0};r.f.miniCss=function(o,a){if(n[o])a.push(n[o]);else if(0!==n[o]&&({53:1})[o]){var i;a.push(n[o]=(i=o,new Promise(function(n,o){var a=r.miniCssF(i),s=r.p+a;if(e(a,s))return n();t(i,s,null,n,o)})).then(function(){n[o]=0},function(t){throw delete n[o],t}))}}}})(),(()=>{var t={980:0};r.f.j=function(e,n){var o=r.o(t,e)?t[e]:void 0;if(0!==o){if(o)n.push(o[2]);else{var a=new Promise(function(r,n){o=t[e]=[r,n]});n.push(o[2]=a);var i=r.p+r.u(e),s=Error();r.l(i,function(n){if(r.o(t,e)&&(0!==(o=t[e])&&(t[e]=void 0),o)){var a=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",s.name="ChunkLoadError",s.type=a,s.request=i,o[1](s)}},"chunk-"+e,e)}}},r.O.j=function(e){return 0===t[e]};var e=function(e,n){var o=n[0],a=n[1],i=n[2],s,l,u=0;if(o.some(function(e){return 0!==t[e]})){for(s in a)r.o(a,s)&&(r.m[s]=a[s]);if(i)var c=i(r)}for(e&&e(n);u<o.length;u++)l=o[u],r.o(t,l)&&t[l]&&t[l][0](),t[l]=0;return r.O(c)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})(),r.ruid="bundler=rspack@1.0.5";var n=r.O(void 0,["72","361","741"],function(){return r("241")});n=r.O(n)})();
//# sourceMappingURL=index.bcbfe96f.js.map