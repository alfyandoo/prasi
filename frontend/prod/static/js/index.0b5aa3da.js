(()=>{var e={5315:function(e){function t(e){return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=()=>[],t.resolve=t,t.id="5315",e.exports=t},3628:function(){},7425:function(e,t,i){"use strict";i.d(t,{V7:()=>v,Og:()=>s,aU:()=>n,AE:()=>r,kn:()=>a,I8:()=>d,Eu:()=>m});var o=i("1902");let n=(e,t,i)=>{let[,n]=(0,o.useState)({}),r=(0,o.useRef)({data:e,deps:i||[],ready:!1,_loading:{},lastRender:0,lastRenderCount:0,delayedRender:!1,delayedRenderTimeout:null,overRenderTimeout:null}).current;if((0,o.useEffect)(()=>{r.ready=!0,t&&t({init:!0,setDelayedRender(e){r.delayedRender=e}})},[]),!1===r.ready)r._loading={},r.data.render=()=>{if(r.ready){if(r.delayedRender){Date.now()-r.lastRender>100?(r.lastRender=Date.now(),n({})):(clearTimeout(r.delayedRenderTimeout),r.delayedRenderTimeout=setTimeout(r.data.render,50));return}if(Date.now()-r.lastRender<300?r.lastRenderCount++:r.lastRenderCount=0,r.lastRender=Date.now(),r.lastRenderCount>300){clearTimeout(r.overRenderTimeout),r.overRenderTimeout=setTimeout(()=>{r.lastRenderCount=0,r.lastRender=Date.now(),n({})},1e3),console.error(`local.render executed ${r.lastRenderCount} times in less than 300ms`);return}n({})}};else if(r.deps.length>0&&i){for(let[e,o]of Object.entries(i))if(r.deps[e]!==o){r.deps[e]=o,t&&setTimeout(()=>{t({init:!1,setDelayedRender(e){r.delayedRender=e}})});break}}return r.data},r=(e,t)=>new Promise(async i=>{if("function"==typeof e){let o=null;if(t&&(o=setTimeout(i,t)),await e()){clearTimeout(o),i();return}let n=setInterval(async()=>{await e()&&(o&&clearTimeout(o),clearInterval(n),i())},10)}else"number"==typeof e&&setTimeout(()=>{i()},e)});var l=i("1679");let a=(0,o.createContext)({global:{},render:()=>{}}),s=(e,t)=>{let{global:i,render:n}=(0,o.useContext)(a);!i[t]&&(i[t]=e),(0,o.useEffect)(()=>()=>{},[]);let r=i[t];return r&&(r.render=e=>{e&&(i[t]=void 0),(0,o.startTransition)(n)}),r},d=l.Z;var p=i("5350"),c=i("2572"),u=i("3704");let m=()=>{let e="object"==typeof window?window:globalThis;e.React=o,e.ReactDOM=p,e.JSXRuntime=u,e.JSXDevRuntime=c,e.Fragment=o.Fragment};var f=i("4931");let v=async function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t="object"==typeof window?window:globalThis;e&&await r(()=>t.__SRV_URL__),t.prasiContext={global:{},render(){}};let i=window.location,o=0===i.protocol.indexOf("http")?i.hostname:"localhost",n="https:"!=i.protocol||/localhost|127.0.0.1|0.0.0.0/.test(o)?"http":"https";if(t.__SRV_URL__){t.serverurl=t.__SRV_URL__;let e=new URL(t.serverurl);("localhost"===e.hostname||"127.0.0.1"===e.hostname)&&(e.hostname=i.hostname,e.pathname="/"===e.pathname?"":e.pathname,t.serverurl=e.toString(),t.serverurl.endsWith("/")&&(t.serverurl=t.serverurl.substring(0,t.serverurl.length-1)))}let l=i.port;t.baseurl=n+"://"+o+(l?":"+l:"")+"/",!t.basepath&&(t.basepath="/"),t.css=f.iv,t.extractCss=f.QV,t.pathname=i.pathname,t.cx=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];let o=[];return t.filter(e=>{if(e)return!!("string"==typeof e&&e.trim())||!0;return!1}).forEach(e=>{if(Array.isArray(e))for(let t of e)"string"==typeof t&&t.trim()&&o.push(t.trim());else o.push(e.trim())}),o.join(" ")},t.navigate=e=>{let i=e;if("function"==typeof t.navigateOverride&&!(i=t.navigateOverride(e)))return null;history.pushState({prevUrl:window.location.href},"",i),t.pathname=e,t.prasiContext&&t.prasiContext.render&&t.prasiContext.render()},"object"==typeof window&&window.addEventListener("popstate",()=>{let e=navigator.serviceWorker.controller;if(e&&e.postMessage({type:"add-cache",url:i.href}),t.prasiContext.popState){t.prasiContext.popState();return}if(t.preventPopRender){t.preventPopRender=!1;return}t.prasiContext&&t.prasiContext.render&&(t.pathname=i.pathname,t.prasiContext.render())})}},6223:function(e,t,i){"use strict";var o;i.d(t,{u:function(){return r},y:function(){return l}});let n=window,r={root:null,url(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];let o=t.map(e=>Array.isArray(e)?e.join(""):e).join(""),n=this.root.toString();return(n.endsWith("/")&&(n=n.substring(0,n.length-1)),o.startsWith("/"))?n+o:n+"/"+o},get pathname(){let e=location.pathname.substring(r.root.pathname.length);if(!e.startsWith("/"))return`/${e}`;return e},site:{id:null===(o=n._prasi)||void 0===o?void 0:o.site_id},init_local_effect:{},mode:"",route:{status:"init",pages:[],router:null},comp:{list:{},pending:{}},layout:{id:"",root:null,meta:null},cache:{urls:new Set},page:{id:"",url:"",root:null,meta:null,cache:{}}},l=()=>{if(!r.root){let e=new URL(location.href);n._prasi.basepath&&(e.pathname=n._prasi.basepath),r.root=new URL(`${e.protocol}//${e.host}${e.pathname}`),r.root.pathname.endsWith("/")&&(r.root.pathname=r.root.pathname.substring(0,r.root.length-1))}}},4871:function(e,t,i){"use strict";var o=i(3704),n=i(9195),r=i(7425),l=i(6223),a=i(995),s=i(1654);i(3628),(async()=>{i.e("326").then(i.bind(i,5085)),(0,l.y)();let e=document.getElementById("root");if(e){await (0,r.V7)(!1);let t={root:(0,n.createRoot)(e)};(0,r.Eu)();try{let e="/_prasi/code/internal.js";if(location.pathname.startsWith("/prod")){let t=location.pathname.split("/");e=`/prod/${t[2]}${e}`}let t=await i(5315)(e);if("object"==typeof t){let e=window;t.Loading&&(e.ContentLoading=t.Loading),t.NotFound&&(e.ContentNotFound=t.NotFound)}}catch(e){}s.w.navigateOverride=e=>{if(e&&e.startsWith("/")&&(0,a.J)()&&location.pathname.startsWith("/prod")&&!e.startsWith("/prod")){let t=location.pathname.split("/");e=`/prod/${t[2]}${e}`}return e},t.root.render((0,o.jsx)(a.f,{})),document.body.classList.contains("opacity-0")&&document.body.classList.remove("opacity-0")}})()},995:function(e,t,i){"use strict";i.d(t,{f:()=>tt,J:()=>te});var o=i("3704"),n=i("5014"),r=i("1902"),l=i("5474"),a=i("7425");let s=window,d=e=>{let{children:t,back:i}=e;return s.ContentNotFound?(0,o.jsx)(s.ContentNotFound,{}):(0,o.jsxs)("div",{className:"flex items-center justify-center w-full h-full fixed inset-0 flex-col",children:[(0,o.jsx)("div",{children:t}),(0,o.jsxs)("div",{className:"border mt-2 rounded-md p-2 cursor-pointer",onClick:i||(()=>{history.back()}),children:[" ","Go Back"]})]})},p=window,c=e=>{let{children:t,className:i,show:n,backdrop:l,note:s,alt:d,pointer:c}=e,u=(0,a.aU)({icon:(0,o.jsx)("div",{className:"px-4 py-1",children:"Loading..."}),value:.111,ival:null},()=>{});(0,r.useEffect)(()=>(u.ival=setInterval(()=>{u.value+=.1333,u.value>=1.3&&(u.value=0),u.render()},200),p.loadingIcon&&(u.icon=(0,o.jsx)("img",{alt:"loading",src:p.loadingIcon,className:css`
            width: 42px;
            height: 42px;
          `}),u.render()),()=>{clearInterval(u.ival)}),[]);let m=p.ContentLoading;return console.log(),(0,o.jsxs)(o.Fragment,{children:[!1!==l&&(0,o.jsx)("div",{className:cx("flex items-center z-40 bg-white pointer-events-none","w-full h-full fixed transition-all duration-1000",void 0!==n?n?"opacity-50":"opacity-0":"opacity-50"),onContextMenuCapture:e=>{e.preventDefault()}}),t?(0,o.jsx)("div",{onContextMenuCapture:e=>{e.preventDefault()},className:cx("flex flex-1 items-center justify-center z-40 transition-all",i||(!1!==l?"w-full h-full fixed":""),void 0!==n?n?"":"hidden":""),children:(0,o.jsx)("div",{className:"flex items-center justify-center flex-col space-y-3 bg-white p-4 rounded-lg select-none",children:(0,o.jsx)("div",{className:"text-sm",children:t})})}):(0,o.jsx)("div",{className:cx("flex flex-1 items-center justify-center z-40  transition-all",!0!==c&&"pointer-events-none",i||(!1!==l?"w-full h-full fixed":""),void 0!==n?n?"":"hidden":""),children:m?(0,o.jsx)(m,{alt:d,note:s}):(0,o.jsxs)("div",{className:cx("w-1/6 flex flex-col items-center justify-center",css`
                  min-width: 30px;
                  .pr-outer {
                    background: rgba(0, 0, 0, 0.1) !important;
                  }
                `),children:[(0,o.jsx)("div",{className:"text-[10px] text-slate-400 whitespace-nowrap",children:s}),(0,o.jsx)("div",{className:"pr-outer w-full h-[3px] flex items-stretch rounded-sm overflow-hidden",children:(0,o.jsx)("div",{className:cx("bg-blue-800 transition-all duration-200 rounded-sm w-full",css`
                      transform: translate(${-100+200*u.value}%);
                    `)})}),d]})})]})},u=(e,t)=>{e.status="loading",e.on_status_changes&&e.on_status_changes(e.status),e.site.id=t.site_id,e.site.api_url=t.api_url,e.status="ready",e.on_status_changes&&e.on_status_changes(e.status)},m={ts:0,status:"init",meta:{},entry:[],tick:0,mode:"desktop",site:{id:"",api_url:"",api:null,db:null},site_url:null,script:{init_local_effect:void 0},visit:void 0,on_status_changes:void 0,layout:void 0,page:{cur:{id:""},navs:{},preload:[]},comp:{load:async()=>null},on_preload:void 0};var f=i("2850");let v=(0,f.Pf)(e=>{let{children:t,meta:i,id:n,silent:r=!0}=e,l=(0,a.aU)({retrying:!1,meta:i}),[s,d]=(0,f.cO)((e,t)=>{!0!==r&&console.error(e)});return(i&&l.meta!==i&&(l.meta=i,setTimeout(d)),s)?(0,o.jsxs)("div",{className:"bg-red-100 border border-red-300 rounded-sm text-xs flex flex-col items-center",children:[(0,o.jsxs)("div",{className:"text-[10px] font-bold text-red-900 self-stretch px-1",children:["ERROR ",(null==i?void 0:i.item.name)?"["+i.item.name+"]:":""]}),(0,o.jsx)("p",{className:"border-b border-red-300 px-1 pb-1 min-w-[100px]",children:l.retrying?(0,o.jsx)(o.Fragment,{children:"Retrying..."}):(0,o.jsx)(o.Fragment,{children:s.message})}),(0,o.jsx)("div",{className:"p-1",children:(0,o.jsx)("button",{onClick:()=>{l.retrying=!0,l.render(),setTimeout(()=>{l.retrying=!1,l.render(),d()},100)},className:"bg-white border border-white hover:border-red-400 hover:bg-red-50 rounded px-2",children:"Try again"})})]}):t}),h=(e,t,i,o)=>{let n=e[t];return"desktop"!==i&&i?e.mobile&&e.mobile[t]&&(n=e.mobile[t]):!n&&e.mobile&&e.mobile[t]&&(n=e.mobile[t]),!n&&(n=o),n},g=(e,t)=>{let i=h(e,"adv",t,{});return"string"==typeof i.css&&i.css.trim()?cx(css`
          ${i.css}
        `,t):""},y=(e,t)=>{let i=h(e,"bg",t,{size:"contain",pos:"center"}),o=`${serverurl}${i.url}`;return i&&i.url&&i.url.startsWith("http")&&i.url,cx(`
      background-repeat: no-repeat;
    `,i.color&&`
        background-color: ${i.color};
      `,i.size&&`
        background-size: ${i.size};
      `,i.pos&&`
        background-position: ${i.pos};
      `)};var _=i("4749"),w=i.n(_);let b=(e,t)=>{let i=h(e,"border",t,{style:"solid",stroke:{},rounded:{tr:0,tl:0,bl:0,br:0},color:"transparent"});return cx(x(i,"stroke.l","border-left-width"),x(i,"stroke.r","border-right-width"),x(i,"stroke.b","border-bottom-width"),x(i,"stroke.t","border-top-width"),x(i,"color","border-color","transparent"),x(i,"style","border-style","dashed"),x(i,"rounded.tl","border-top-left-radius"),x(i,"rounded.tr","border-top-right-radius"),x(i,"rounded.bl","border-bottom-left-radius"),x(i,"rounded.br","border-bottom-right-radius"))},x=(e,t,i,o)=>{let n=w()(e,t);if(o)return n?`${i}: ${n};`:`${i}: ${o};`;if(n)return`${i}: ${n}px;`},j=(e,t,i)=>{let o=h(e,"dim",t,{h:"fit",w:"fit"});return"full"===o.w&&"full"===o.h?`
      width:100%;
      height:100%;
      flex:1;
    `:cx("fit"===o.w&&`
        & > .txt-box > * {
          white-space: nowrap !important;
        }
      `,"full"===o.w&&`
        width: 100%;
      `,o.w&&"number"==typeof o.w&&o.w>=0&&`
        width: ${o.w}${o.wUnit||"px"};
        overflow-x: clip;
      `,"full"===o.h&&`
        height: ${i?"100%":"100"+("section"===e.type?"vh":"%")};
        margin-bottom: auto;
      `,o.h&&"number"==typeof o.h&&o.h>=0&&`
        height: ${o.h}${o.hUnit||"px"};
        overflow-y: clip;
      `)},$=e=>{let{item:t,hover:i,active:o}=e;return cx(i&&css`
        & {
          box-shadow: inset 0 0 0px 3px #bae3fd;
          > img {
            opacity: 0.6;
          }
        }
      `,o&&css`
        box-shadow: inset 0 0 0px 2px #009cff !important;
        > img {
          opacity: 0.6;
        }
      `)},k=window,O=(e,t)=>{let i=h(e,"font",t,{});if(i.family){!k.loadedFonts&&(k.loadedFonts=[]);let e=i.family.replace(/ /g,"+");if(0>k.loadedFonts.indexOf(i.family)){k.loadedFonts.push(i.family);let t=document,o=`https://fonts.googleapis.com/css2?family=${e}:wght@300;400;500;600&display=swap`;if(!t.querySelector(`link[href="${o}]`)){let e=t.createElement("link");e.type="text/css",e.rel="stylesheet",e.crossOrigin="anonymous",e.href=o,t.head.appendChild(e)}}}return!i.family&&k.defaultFont&&(i.family=k.defaultFont),cx(i.color&&`
        color: ${i.color};
      `,"whitespace-normal"===i.whitespace&&`
      word-break: break-word;
    `,"whitespace-nowrap"===i.whitespace&&`
        white-space: nowrap;
      `,i.color&&`
        color: ${i.color};
      `,`
      text-align: ${i.align?i.align:"left"};
    `,i.size&&`
        font-size: ${i.size||15}px;
      `,i.height&&`
        line-height: ${"auto"===i.height?"normal":`${i.height}%`};
      `,i.family&&`
        font-family: ${i.family};
      `)},S=(e,t)=>{let i=[],o=h(e,"layout",t,{dir:"col",align:"top-left",gap:0,wrap:void 0});return o?(o.wrap&&i.push("flex-wrap"===o.wrap?"flex-wrap: wrap;":"flex-wrap: nowrap;"),o.dir.startsWith("col")?("col"===o.dir?i.push("flex-direction: column;"):"col-reverse"===o.dir&&i.push("flex-direction: column-reverse;"),"auto"===o.gap?("left"===o.align&&i.push("align-items:start; justify-content: space-between;"),"center"===o.align&&i.push("align-items:center; justify-content: space-between;"),"right"===o.align&&i.push("align-items:end; justify-content: space-between;")):(i.push(`gap: ${o.gap}px;`),"top-left"===o.align&&i.push("align-items:start; justify-content: start;"),"top-center"===o.align&&i.push("align-items:center; justify-content: start;"),"top-right"===o.align&&i.push("align-items:end; justify-content: start;"),"left"===o.align&&i.push("align-items:start; justify-content: center;"),"center"===o.align&&i.push("align-items:center; justify-content: center;"),"right"===o.align&&i.push("align-items:end; justify-content: center;"),"bottom-left"===o.align&&i.push("align-items:start; justify-content: end;"),"bottom-center"===o.align&&i.push("align-items:center; justify-content: end;"),"bottom-right"===o.align&&i.push("align-items:end; justify-content: end;"))):("row"===o.dir?i.push("flex-direction: row;"):"row-reverse"===o.dir&&i.push("flex-direction: row-reverse;"),"auto"===o.gap?("top"===o.align&&i.push("align-items:start; justify-content: space-between;"),"center"===o.align&&i.push("align-items:center; justify-content: space-between;"),"bottom"===o.align&&i.push("align-items:end; justify-content: space-between;")):(i.push(`
            gap: ${o.gap}px;
          `),"top-left"===o.align&&i.push("align-items:start; justify-content: start;"),"top-center"===o.align&&i.push("align-items:start; justify-content: center;"),"top-right"===o.align&&i.push("align-items:start; justify-content: end;"),"left"===o.align&&i.push("align-items:center; justify-content: start;"),"center"===o.align&&i.push("align-items:center; justify-content: center;"),"right"===o.align&&i.push("align-items:center; justify-content: end;"),"bottom-left"===o.align&&i.push("align-items:end; justify-content: start;"),"bottom-center"===o.align&&i.push("align-items:end; justify-content: center;"),"bottom-right"===o.align&&i.push("align-items:end; justify-content: end;"))),i.join("\n	").trim()):"flex-direction:column; align-items:start; justify-content: start;"},R=(e,t)=>{let i=h(e,"padding",t,{l:0,b:0,t:0,r:0});return cx(void 0!==i.l&&`
        padding-left: ${i.l}px;
      `,void 0!==i.r&&`
        padding-right: ${i.r}px;
      `,void 0!==i.b&&`
        padding-bottom: ${i.b}px;
      `,void 0!==i.t&&`
        padding-top: ${i.t}px; 
      `)},I=(e,t)=>{try{return cx([e.id?`s-${e.id}`:"",css`
        display: flex;
        position: relative;
        user-select: none;
        ${S(e,t.mode)}
        ${R(e,t.mode)}
        ${j(e,t.mode,null==t?void 0:t.editor)}
        ${b(e,t.mode)}
        ${y(e,t.mode)}
        ${O(e,t.mode)}
      `,((null==t?void 0:t.hover)||(null==t?void 0:t.active))&&$({item:e,hover:null==t?void 0:t.hover,active:null==t?void 0:t.active}),g(e,t.mode)])}catch(e){console.log(e)}return cx([])},A=(e,t,i,n,r)=>{var l,a,s,d;let p,c;let u=t.item;(null===(l=u.component)||void 0===l?void 0:l.style)&&(p={style:u.component.style,className:I(u.component.style,{mode:e.mode})});let m={className:I(u,{mode:e.mode}),inherit:p},f=t.item.childs;return"text"===t.item.type?(c=null,m.dangerouslySetInnerHTML={__html:t.item.html||""}):c=Array.isArray(f)&&(null==f?void 0:f.map(t=>{var l,a;if(!t)return null;let{id:s}=t,d=i?null===(l=e.layout)||void 0===l?void 0:l.meta[s]:e.meta[s];return d?(0,o.jsx)(ec,{meta:d,is_layout:i,passprop:{...n},depth:r+1},s):("item"===t.type&&(null===(a=t.component)||void 0===a?void 0:a.id)&&console.error(`Warning component ${t.name} - ${t.component.id} failed to load.`),null)})),m.children=c,(null===(a=t.item.adv)||void 0===a?void 0:a.html)?(delete m.children,m.dangerouslySetInnerHTML={__html:null===(d=t.item.adv)||void 0===d?void 0:d.html}):(null===(s=t.item.adv)||void 0===s?void 0:s.js)&&!t.item.adv.js.includes("children")&&(delete m.children,delete m.dangerouslySetInnerHTML),{props:m,text_props:{}}};var N=i("2232"),C=i("9927");let E={active_id:!1,comp_id:!1,instance_comp_id:!1,instance_item_id:!1},P={should_render_main:!0,hover:{id:"",tree:!1},scope:{},script_nav:{list:[],idx:-1},text:{id:"",content:"",timeout:null,el:null},get item_id(){return!1===E.active_id&&(E.active_id=localStorage.getItem("prasi-active-id")||""),E.active_id||""},set item_id(val){localStorage.setItem("prasi-active-id",val||""),E.active_id=val||""},get comp_id(){return!1===E.comp_id&&(E.comp_id=localStorage.getItem("prasi-comp-id")||""),E.comp_id||""},set comp_id(val){localStorage.setItem("prasi-comp-id",val||""),E.comp_id=val||""},instance:{get comp_id(){return!1===E.instance_comp_id&&(E.instance_comp_id=localStorage.getItem("prasi-instance-comp-id")||""),E.instance_comp_id||""},set comp_id(val){localStorage.setItem("prasi-instance-comp-id",val||""),E.instance_comp_id=val||""},get item_id(){return!1===E.instance_item_id&&(E.instance_item_id=localStorage.getItem("prasi-instance-item-id")||""),E.instance_item_id||""},set item_id(val){localStorage.setItem("prasi-instance-item-id",val||""),E.instance_item_id=val||""}}};(0,C.p7)(),(0,a.I8)({id:"",name:"",domain:"",config:{api_url:""},deploy_name:"",js:"",js_compiled:"",responsive:"",layout:{id:"--",meta:void 0,entry:[]}}),Date.now(),localStorage.getItem("prasi-comp-editable"),localStorage.zoom,parseInt(localStorage.getItem("prasi-layout-left")||"250"),parseInt(localStorage.getItem("prasi-layout-right")||"250"),JSON.parse(localStorage.getItem("panel-file-expanded")||"{}");let T=e=>({isMobile:"mobile"===e.mode,isDesktop:"desktop"===e.mode,isEditor:location.pathname.startsWith("/ed/")}),B={transform:null},L=async(e,t)=>{!B.transform&&(B.transform=(await i.e("719").then(i.bind(i,2895))).transform);let o={};for(let[i,n]of Object.entries(e))for(let e of(o[i]=B.transform(n,{transforms:["typescript","imports","jsx"],preserveDynamicImport:!0,disableESTransforms:!0,filePath:t}).code,['"use strict";']))o[i].startsWith(e)&&(o[i]=o[i].substring(e.length).trim());return o},F=window,U=(0,n.MT)("prasi-cache","prasi-cache-store"),W={timeout:null},D=(e,t)=>{let i=[...J(t,"navigate(",")"),...J(t,"href = ",";")],o=e.page.cur.id;for(let t of(!e.page.navs[o]&&(e.page.navs[o]=new Set),i))e.page.navs[o].add(t);clearTimeout(W.timeout),W.timeout=setTimeout(()=>{e.on_nav_loaded&&e.on_nav_loaded({urls:Array.from(e.page.navs[o])})},100)},J=(e,t,i)=>{let o=0,n=0,r=[];for(;;){let l=e.indexOf(t,o);if(n=o,l>=0){let n=e[l+t.length];if('"'===n||"'"===n||"`"===n){let a=e.indexOf(`${n}${i}`,l+t.length+1),s=e.substring(l+t.length+1,a);o=a+2+i.length,r.push(s)}}if(n===o)break}return r},M=(e,t,i,n,l)=>a=>{let[s,d]=(0,r.useState)({}),p=a.idx||a.internal_key;!i.item.script&&(i.item.script={});let c=i.item.script;void 0!==p&&(!i.item.script_keyed&&(i.item.script_keyed={}),!i.item.script_keyed[p]&&(i.item.script_keyed[p]={}),c=i.item.script_keyed[p]),!c.passprop&&(c.passprop={});let u={},m=!1;for(let[e,t]of Object.entries(a))!["children","key"].includes(e)&&(u[e]=t);let f={...n,...u};if(void 0!==p&&(void 0===c.passprop.internal_key?c.passprop=f:p===c.passprop.internal_key&&(c.passprop=f),f=c.passprop),i.editor_props=f,!Array.isArray(a.children)&&(0,r.isValidElement)(a.children)&&"object"==typeof a.children){let i=w()(a.children,"props.meta.item.component.props.child.content.childs");if(Array.isArray(i)){let n=!0;for(let e of i)!(!(0,r.isValidElement)(e)&&"object"==typeof e)&&(n=!1);if(n)return i.map(i=>{let n=e.meta[i.id];if(!n&&(e.meta[i.id]={item:i},n=e.meta[i.id]),n){if(Object.keys(n.item).length<=3&&n.mitem){let e={...n.item},t=n.mitem.toJSON();n.item={...t,...e}}return(0,o.jsx)(ec,{is_layout:t,meta:n,passprop:f,parent_key:a.internal_key,depth:l},i.id)}return null})}}if(!Array.isArray(a.children)&&!(0,r.isValidElement)(a.children)&&"object"==typeof a.children){let i=a.children.id;if(i){let n=e.meta[i];if(!n){var v;e.meta[i]={item:a.children};let t=null===(v=(n=e.meta[i]).item.component)||void 0===v?void 0:v.id;t&&e.comp.load(t).then(e=>{if(e){var t,i;for(let[t,i]of Object.entries(e)){let e=n.item;!e[t]&&(e[t]=i)}let o=null===(t=n.item.component)||void 0===t?void 0:t.props;for(let[t,n]of Object.entries((null===(i=e.component)||void 0===i?void 0:i.props)||{}))!o[t]&&(o[t]=n);d({})}})}return(0,o.jsx)(ec,{is_layout:t,meta:n,passprop:f,parent_key:a.internal_key,depth:l})}}return V(a,f,p?{parent_key:p}:void 0)},V=(e,t,i)=>{let o={};if(Array.isArray(e)?o.children=e:o=e,Array.isArray(o.children)){if(1===o.children.length)return z(o.children[0],o,t,i);let e=[];for(let n of o.children)e.push(z(n,o,t,i));return e}return z(o.children,o,t,i)},z=(e,t,i,o)=>{if((0,r.isValidElement)(e)){let n={...t};return delete n.children,{...e,props:{...e.props,...o,passprop:{...i,...n}}}}return Array.isArray(e)?V(e,i,o):e},q={},H=(e,t,i)=>o=>{var n,l,s;let d=(["prasi.avolut.com"].includes(location.hostname)||"localhost:4550"===location.host)&&location.pathname.startsWith("/ed/"),p=i.item.id,{children:c,parent_key:u}=o,m=null===(n=e.script)||void 0===n?void 0:n.init_local_effect,f=t?null===(l=e.layout)||void 0===l?void 0:l.meta:e.meta,v=e.page.cur.id+"~"+p;if(q[v]){if(!q[v].mounted){if(!eo.isEditor){for(let[e,t]of Object.entries(q[v].value))delete q[v].value[e];for(let[e,t]of Object.entries((0,a.I8)(o.value)))q[v].value[e]=t}q[v].mounted=!0}}else q[v]={mounted:!0,value:o.value};let h=(0,r.useRef)(q[v].value),[g,y]=(0,r.useState)({}),_=h.current;return _.render=()=>{let e=window;!e.isEditor&&e.prasiContext.render?e.prasiContext.render():y({})},o.hook&&o.hook(_),(0,r.useEffect)(()=>{var e,t;if((null===(e=i.parent)||void 0===e?void 0:e.instance_id)&&f){let e=f[null===(t=i.parent)||void 0===t?void 0:t.instance_id];if(e&&e.instances){for(let[t,o]of Object.entries(e.instances[i.parent.instance_id]))if(o===i.item.id){p=t;break}}}return!m[p]&&("object"==typeof m&&(m[p]=!0),(async()=>{o.effect&&await o.effect(_)})()),()=>{q[v].mounted=!1}},[...o.deps||[],location.pathname]),(0,r.useEffect)(()=>{d&&null===q[p]&&(async()=>{o.effect&&(await o.effect(_),d&&(q[p]=_))})()},[q[p]]),V(c,{...null===(s=i.script)||void 0===s?void 0:s.scope,[o.name]:_})},Z=window,G=(e,t,i,o)=>{let n=o||{},r=t.get("id")||"";!Z.prasiEditDevItem&&(Z.prasiEditDevItem={});let l=Z.prasiEditDevItem[i];!l&&(Z.prasiEditDevItem[i]={},l=Z.prasiEditDevItem[i]);let a=()=>{let e=t.get("id")||"",i=l[e];return!i&&(l[e]=[],i=l[e]),i},s=t.toJSON(),d={...s,edit:{get props(){var p,c,u,m;if(null===(p=s.component)||void 0===p?void 0:p.props){let o={};for(let[r,l]of Object.entries(s.component.props))if(l.content){let l=null===(m=t.get("component"))||void 0===m?void 0:null===(u=m.get("props"))||void 0===u?void 0:null===(c=u.get(r))||void 0===c?void 0:c.get("content");if(l){let t=l.get("id")||"";n[t]?o[r]={mode:"jsx",value:n[t]}:o[r]={mode:"jsx",value:G(e,l,i,n)}}else o[r]={mode:"jsx",value:null}}else{let e="string"==typeof l.valueBuilt?l.valueBuilt.trim():"";if(e.endsWith(";\n")&&(e=e.substring(0,e.length-2)),e&&e===l.value.trim()){let e=Function(`return ${l.value}`);o[r]={mode:"string",value:e()}}else o[r]={mode:"raw",value:l.value,valueBuilt:l.valueBuilt}}return o}return},get pending(){return[]},async commit(){let i={},o={};if(t){var n,r,a;for(let[t,n]of Object.entries(l)){let l=e[t];if(!l||!l.mitem)continue;let s=l.mitem.toJSON();if(s&&s.component){let e=null==s?void 0:null===(r=s.component)||void 0===r?void 0:r.props;if(!e){console.log(s,e);return}let l={};for(let t of n)if("prop"===t.type&&e)e[t.name]&&("string"===t.mode?(e[t.name].value=JSON.stringify(t.value),e[t.name].valueBuilt=JSON.stringify(t.value)):"raw"===t.mode?(e[t.name].value=t.value,t.valueBuilt?e[t.name].valueBuilt=t.valueBuilt:l[t.name]=t.value):"jsx"===t.mode&&(!e[t.name]&&(e[t.name]={meta:{type:"content-element"}}),t.value&&(e[t.name].content=K([t.value],o)[0])));else if("set"===t.type&&"object"==typeof t.value)for(let[e,i]of Object.entries(t.value))s[e]=i;else if("child"===t.type&&Array.isArray(t.childs)){if(null===(a=s.component)||void 0===a?void 0:a.id)!s.component.props&&(s.component.props={}),s.component.props.child={meta:{type:"content-element"},content:{type:"item",id:(0,N.createId)(),name:"child",childs:K(t.childs.filter(e=>e),o)}};else{let e=K(t.childs.filter(e=>e),o);s.childs=e}}for(let[e,t]of Object.entries(o))l[e]=t.value;let d=await L(l);if(await new Promise(e=>{setTimeout(e)}),e)for(let[t,i]of Object.entries(d))e[t]?e[t].valueBuilt=i:o[t]&&(o[t].valueBuilt=i);i[t]=s}}null===(n=t.doc)||void 0===n||n.transact(()=>{for(let[t,o]of Object.entries(i)){let i=e[t];i.mitem&&syncronize(i.mitem,o)}})}},setValue(e,t){let i=a();if("childs"===e)throw Error("Please modify childs via .child");i.push({type:"set",name:e,value:t})},setProp(e,t){let i=a();"string"==typeof t?i.push({type:"prop",mode:"string",name:e,value:t}):"string"===t.mode?i.push({type:"prop",mode:"string",name:e,value:t.value}):"raw"===t.mode?i.push({type:"prop",mode:"raw",name:e,value:t.value,valueBuilt:t.valueBuilt}):"jsx"===t.mode&&i.push({type:"prop",mode:"jsx",name:e,value:t.value})},setChilds(e){a().push({type:"child",childs:e})},get childs(){var f,v,h,g,y;if(null===(f=s.component)||void 0===f?void 0:f.id){let o=null===(v=s.component)||void 0===v?void 0:v.props.child;if(o&&o.content){let o=null===(y=t.get("component"))||void 0===y?void 0:null===(g=y.get("props"))||void 0===g?void 0:null===(h=g.get("child"))||void 0===h?void 0:h.get("content");if(o){let t=o.get("id")||"";if(n[t])return[n[t]];return[G(e,o,i,n)]}}return[]}if(s.childs)return s.childs.map(t=>{if(t){let o=e[t.id];if(n[t.id])return n[t.id];if(o&&o.mitem)return G(e,o.mitem,i,n)}}).filter(e=>e);return[]},get parent(){if(t){var _,w,b,x,j;let o=t.parent.toJSON(),r=null;if(Array.isArray(o))r=(null===(w=t.parent)||void 0===w?void 0:w.parent).get("id");else{let e=null===(j=t.parent)||void 0===j?void 0:null===(x=j.parent)||void 0===x?void 0:null===(b=x.parent)||void 0===b?void 0:b.parent;"object"==typeof e&&"function"==typeof e.get&&(r=e.get("id"))}let l=null===(_=e[r])||void 0===_?void 0:_.mitem;if(l){let t=n[r]?n[r]:G(e,l,i,n);if(Array.isArray(o))return{item:t,child_type:"child",child_idx:o.findIndex(e=>e.id===t.id)};return{item:t,child_type:"prop"}}}return null}}};return n[r]=d,d},X=(e,t)=>{let i={};for(let[o,n]of Object.entries(e))n.mode?"string"===n.mode?i[o]={value:JSON.stringify(n.value),valueBuilt:JSON.stringify(n.value),meta:{type:"text"}}:"jsx"===n.mode&&n.value?i[o]={value:"",valueBuilt:"",content:K([n.value],t)[0],meta:{type:"content-element"}}:"raw"===n.mode&&(i[o]={value:n.value,valueBuilt:n.valueBuilt,meta:{type:"text"}}):i[o]=n;return i},K=(e,t)=>{let i=t||{};return e.map(e=>{let t={...e};if(delete t.edit,!t.id&&(t.id=(0,N.createId)()),t.component){var o;if(!t.component.instances&&(t.component.instances={}),!t.component.ref_ids&&(t.component.ref_ids={}),null===(o=t.component)||void 0===o?void 0:o.props)for(let[e,o]of(t.component.props=X(t.component.props,i),Object.entries(t.component.props)))!o.valueBuilt&&o.value&&(i[t.id+"|||"+e]=o),o.content&&(o.content=K([o.content],i)[0])}return t.childs?t.childs=K(t.childs,i):t.childs=[],t})},Q=(e,t,i)=>({...t,edit:{setChilds(e){},get childs(){var o,n;if(null===(o=t.component)||void 0===o?void 0:o.id){let o=null===(n=t.component)||void 0===n?void 0:n.props.child;if(o.content)return[Q(e,o.content,i)];return[]}if(t.childs)return t.childs.map(t=>{if(t){let o=e[t.id];if(o&&o.item)return Q(e,o.item,i)}}).filter(e=>e);return[]},get props(){var r,l,a,s;if(null===(r=t.component)||void 0===r?void 0:r.props){let o={};for(let[n,r]of Object.entries(t.component.props))if(r.content){let r=null===(s=t.component)||void 0===s?void 0:null===(a=s.props)||void 0===a?void 0:null===(l=a[n])||void 0===l?void 0:l.content;r?o[n]={mode:"jsx",value:Q(e,r,i)}:o[n]={mode:"jsx",value:null}}else{let e="string"==typeof r.valueBuilt?r.valueBuilt.trim():"";if(e.endsWith(";\n")&&(e=e.substring(0,e.length-2)),e&&e===r.value.trim()){let e=Function(`return ${r.value}`);o[n]={mode:"string",value:e()}}else o[n]={mode:"raw",value:r.value,valueBuilt:r.valueBuilt}}return o}return},async commit(){},get parent(){var d;let o=e[t.id];if(o&&(null===(d=o.parent)||void 0===d?void 0:d.id)){let t=e[o.parent.id];return Q(e,t.item,i)}return null},pending:[],setProp(e,t){},setValue(e,t){}}}),Y=(e,t,i,n,l,a)=>{var s,d,p;let c=A(e,t,i,n,l);e.visit&&e.visit(t,c),t.script?t.script.scope=n:t.script={scope:n,result:null,Local:H(e,i,t),PassProp:M(e,i,t,n,l)};let u=t.script,m=window.exports,f={useEffect:r.useEffect,children:c.props.children,props:c.props,Local:null==u?void 0:u.Local,db:e.site.db,api:e.site.api,PassProp:null==u?void 0:u.PassProp,ErrorBox:v,newElement:()=>{},__props:n,_item:t.mitem?G(e.meta,t.mitem,e.page.cur.id):Q(e.meta,t.item,e.page.cur.id),_meta:e.meta,render:e=>{let i=e;if((0,r.isValidElement)(e)&&e.props.children){let o=e=>{let i=!1,n=[];if((0,r.isValidElement)(e)){var l,a,s;if(e.type===(null===(l=t.script)||void 0===l?void 0:l.PassProp))return{should_replace:!0,el:{...e,props:{...e.props,internal_key:e.key}}};if((null===(a=e.props)||void 0===a?void 0:a.children)&&(!Array.isArray(e.props.children)&&(e.props.children=[e.props.children]),Array.isArray(e.props.children)))for(let r of e.props.children)if(Array.isArray(r)){let e=[],t=!1;for(let i of r){let n=o(i);n.should_replace?(e.push(n.el),t=!0):e.push(i)}t?(i=!0,n.push(e)):n.push(r)}else"object"==typeof r&&r?r.type===(null===(s=t.script)||void 0===s?void 0:s.PassProp)&&(i=!0,n.push({...r,props:{...r.props,internal_key:r.props.key}})):n.push(r)}return{should_replace:i,el:{...e,props:{...e.props,children:n}}}},n=o(e);n.should_replace&&(i=n.el)}u&&(u.result=(0,o.jsx)(r.Suspense,{children:i}))},params,...T(e),...m,...n};if("object"==typeof n)for(let[e,i]of Object.entries(n))"object"==typeof i&&i&&i._jsx&&(f[e]=(0,o.jsx)(ee,{fn:i.fn,passprop:{...n},meta:t}));!F.isEditor&&(null===(s=t.item.adv)||void 0===s?void 0:s.js)&&D(e,t.item.adv.js);let h=(null===(d=t.item.adv)||void 0===d?void 0:d.jsBuilt)||"",g=ei(h,et)||"";h.includes("parent_props")&&console.log(t.item.name,f);let y=`\
// ${t.item.name}: ${t.item.id} 
try {
  ${g}
} catch (e) {
  console.error(\`\\
Error in item ${t.item.name}: ${t.item.id} 

$\{__js}

ERROR: $\{e.message}
\`)
}
  `;try{Function(...Object.keys(f),"__js",y)(...Object.values(f),null===(p=t.item.adv)||void 0===p?void 0:p.js)}catch(e){console.error(`

// Syntax Error in ${t.item.name}: ${t.item.id} 
// arg: ${Object.keys(f).join(", ")}

${y}

${e.message}
`)}ea(e,t,n,a)},ee=e=>{let{fn:t,meta:i,passprop:o}=e;return t({passprop:o,meta:i})},et={"stroke-width":"strokeWidth","fill-rule":"fillRule","clip-rule":"clipRule","stroke-linejoin":"strokeLinejoin","stroke-linecap":"strokeLinecap","clip-path":"clipPath","stroke-miterlimit":"strokeMiterlimit"},ei=(e,t)=>{let i=e;for(let[e,o]of Object.entries(t))i=i.replaceAll(e,o);return i},eo=window,en=(e,t,i,n,r,l)=>{var a,s,d,p,c;if(null===(a=t.item.component)||void 0===a?void 0:a.id){let a=t.item.script;if(l?(!t.item.script_keyed&&(t.item.script_keyed={}),!t.item.script_keyed[l]&&(t.item.script_keyed[l]={}),a=t.item.script_keyed[l]):(!t.item.script&&(t.item.script={}),a=t.item.script),!a)return;let u={...window.exports,db:e.site.db,api:e.site.api,...T(e),...n,params};a.props={};let m=new Set;if(t.item.component.props){let l={};for(let[f,v]of Object.entries(t.item.component.props))try{if((null===(s=v.meta)||void 0===s?void 0:s.type)==="content-element"){let l={_jsx:!0,fn:n=>{var l,a,s,d,p;let c=null===(l=v.content)||void 0===l?void 0:l.id;if(c){let l=i?null===(a=e.layout)||void 0===a?void 0:a.meta[c]:e.meta[c];if(!l)return null;let u=t.instances;if(!n.meta.item.originalId||!u||!u[t.item.id])return null;let m=n.meta.item.originalId;if(l.mitem&&(v.jsxCalledBy&&(!v.jsxCalledBy.includes(m)||2!==v.jsxCalledBy.length)||!v.jsxCalledBy)){let e=null===(p=t.mitem)||void 0===p?void 0:null===(d=p.get("component"))||void 0===d?void 0:null===(s=d.get("props"))||void 0===s?void 0:s.get(f);if(e){let i=e.get("jsxCalledBy");i&&"object"==typeof i?Array.isArray(i)&&(!i.includes(m)||2!==i.length||i[0]!==t.item.id||i[1]!==m)&&e.set("jsxCalledBy",[t.item.id,m]):e.set("jsxCalledBy",[t.item.id,m])}}return(0,o.jsx)(ec,{meta:l,passprop:n.passprop,is_layout:i,depth:r+1})}return null}};u[f]=l,n&&(n[f]=l);continue}if(v.value&&D(e,v.value),!v.valueBuilt&&v.value&&t.mitem){let e=null===(c=t.mitem)||void 0===c?void 0:null===(p=c.get("component"))||void 0===p?void 0:null===(d=p.get("props"))||void 0===d?void 0:d.get(f);if(e){el(e,v.value);return}}let m=v.valueBuilt||"";m.startsWith('const _jsxFileName = "";')&&(m=`(() => { ${m.replace('const _jsxFileName = "";','const _jsxFileName = ""; return ')} })()`);let h=ei(m,et)||"",g=Function(...Object.keys(u),`// [${t.item.name}] ${f}: ${t.item.id} 
  return ${h}
    `);a.props[f]={value:h,valueBuilt:h};let y=g(...Object.values(u));"function"==typeof y&&(y=function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return Function(...Object.keys(u),`// [${t.item.name}] ${f}: ${t.item.id} 
return ${h.trim()}
`)(...Object.values(u))(...i)}),u[f]=y,l[f]=y,n&&(n[f]=y)}catch(e){m.add(f)}if(location.pathname.startsWith("/ed/")&&P.item_id&&t.item.id===P.item_id){for(let[e,t]of(P.scope={},Object.entries(n)))P.scope[e]=t;P.scope.self_props=l}}}},er={timeout:null,set:new WeakSet,map:{},src:{}},el=(e,t)=>{if(!er.set.has(e)){er.set.add(e);let i=(0,N.createId)();er.map[i]={mprop:e},er.src[i]=t}clearTimeout(er.timeout),er.timeout=setTimeout(async()=>{let e=await L(er.src),t=null;for(let[i,o]of Object.entries(e)){let e=er.map[i].mprop;if(!t&&e.doc){t=e.doc;break}}t&&(t.transact(()=>{for(let[t,i]of Object.entries(e))er.map[t].mprop.set("valueBuilt",i)}),er.set=new WeakSet,er.map={},er.src={})},300)},ea=(e,t,i,o)=>{var n;let r=o?null===(n=t.item.script_keyed)||void 0===n?void 0:n[o]:t.item.script;if(r&&r.props){let o={...i,api:e.site.api,db:e.site.db};for(let[e,i]of Object.entries(r.props))if(i.fn){let n=Function(...Object.keys(o),`// [${t.item.name}] ${e}: ${t.item.id} 
  return ${i.value||""}
    `);i.fn=n(...Object.values(o))}}},es=e=>{var t,i,n;let{meta:l,passprop:s,is_layout:d,parent_key:p,depth:c}=e,u=(0,a.Og)(m,"VI"),[f,v]=(0,r.useState)({});l.render=()=>{v({})};let h=s;return((null===(t=l.item.component)||void 0===t?void 0:t.id)&&(!h&&(h={}),en(u,l,d,h,c,p)),null===(i=l.item.adv)||void 0===i?void 0:i.html)?(0,o.jsx)(eu,{meta:l,passprop:h,is_layout:d,depth:c}):(null===(n=l.item.adv)||void 0===n?void 0:n.js)&&(Y(u,l,d,h,c,p),l.script)?l.script.result:(0,o.jsx)(eu,{meta:l,passprop:h,is_layout:d,depth:c})},ed={debug:!!localStorage.getItem("prasi-js-debug")},ep={enabled:!1,meta:{}},ec=e=>{var t,i,n,r;let{meta:l,passprop:a,is_layout:s,parent_key:d,depth:p}=e;if(ep.enabled){let e=ep.meta;if(e[l.item.id]&&e[l.item.id].last_render===Math.floor(Date.now()/1e3)?e[l.item.id].count++:e[l.item.id]={last_render:Math.floor(Date.now()/1e3),count:1},(null===(n=e[l.item.id])||void 0===n?void 0:n.count)>70)return(0,o.jsxs)("div",{className:"bg-orange-100 border border-orange-300 rounded-sm text-xs flex flex-col items-center",children:[(0,o.jsxs)("div",{className:"text-[10px] font-bold text-red-900 self-stretch px-1",children:["WARNING: Render loop detected in [",l.item.name,"]"]}),(0,o.jsxs)("p",{className:"border-b border-orange-300 px-1 pb-1 min-w-[100px]",children:["Rendered ",null===(r=e[l.item.id])||void 0===r?void 0:r.count," times in less than 1 second."]})]})}if(!l||l.item.hidden)return null;if(ed.debug){let e="";for(let t=0;t<p;t++)e+=".";console.log(e+l.item.id,l.item.name)}return!(s&&"children"===l.item.name)&&((null===(t=l.item.adv)||void 0===t?void 0:t.js)||(null===(i=l.item.component)||void 0===i?void 0:i.id))?(0,o.jsx)(v,{meta:l,children:(0,o.jsx)(es,{meta:l,depth:p,is_layout:s,passprop:{...a},parent_key:d})}):(0,o.jsx)(v,{meta:l,children:(0,o.jsx)(eu,{meta:l,passprop:{...a},depth:p,is_layout:s,parent_key:d})})},eu=e=>{let{meta:t,passprop:i,is_layout:n,parent_key:l,depth:s}=e,d=(0,a.Og)(m,"VI");if(n&&"children"===t.item.name){let e=[];for(let t of d.entry){var p,c;let n=d.meta[t];if((null===(p=n.item.adv)||void 0===p?void 0:p.js)||(null===(c=n.item.component)||void 0===c?void 0:c.id))e.push((0,o.jsx)(v,{meta:n,children:(0,o.jsx)(es,{meta:n,is_layout:!1,passprop:{...i},parent_key:l,depth:s+1})}));else{let t=A(d,n,!1,i,s);d.visit&&d.visit(n,t),e.push((0,o.jsx)("div",{...t.props}))}}return(0,o.jsx)(o.Fragment,{children:e.map((e,t)=>(0,o.jsx)(r.Fragment,{children:e},t))})}let u=A(d,t,n,i,s);return d.visit&&d.visit(t,u),(0,o.jsx)("div",{...u.props})},em=window,ef=async(e,t)=>{window.parent&&(window.addEventListener("message",async i=>{let{data:o}=i;if("object"==typeof o&&o.mobile){var n,r,l,a,s,d;let i=async e=>{var t;if(!(null===(t=em.notif)||void 0===t?void 0:t.onTap)){let t=null,i=0;await new Promise(()=>{t=setInterval(()=>{++i>20&&clearInterval(t),e()&&clearInterval(t)},500)});return}};switch(o.type){case"notification-token":t.notif={token:o.token},em.notif={async send(t){if(e&&e.site.api)return await e.site.api._notif("send",{type:"send",id:"string"==typeof t.user_id?t.user_id:t.user_id.toString(),body:t.body,title:t.title,data:t.data})},async register(i){var o;if(e&&e.site.api&&(null===(o=t.notif)||void 0===o?void 0:o.token))return await e.site.api._notif("register",{type:"register",id:"string"==typeof i?i:i.toString(),token:t.notif.token})},onReceive(e){},onTap(e){}};break;case"notification-tap":if(!(null===(n=em.notif)||void 0===n?void 0:n.onTap)){i(()=>{var e,t;return(null===(e=em.notif)||void 0===e?!!void 0:!!e.onTap)&&(null===(t=em.notif)||void 0===t||t.onTap(o.notif),!0)});return}(null===(r=em.notif)||void 0===r?void 0:r.onTap)&&(null===(l=em.notif)||void 0===l||l.onTap(o.notif));break;case"notification-receive":!(null===(a=em.notif)||void 0===a?void 0:a.onReceive)&&i(()=>{var e,t;return(null===(e=em.notif)||void 0===e?!!void 0:!!e.onReceive)&&(null===(t=em.notif)||void 0===t||t.onReceive(o.notif),!0)}),(null===(s=em.notif)||void 0===s?void 0:s.onReceive)&&(null===(d=em.notif)||void 0===d||d.onReceive(o.notif))}}}),window.parent.postMessage({mobile:!0,type:"ready"},"*")),em.notif={async send(t){if(e&&e.site.api)return await e.site.api._notif("send",{type:"send",id:"string"==typeof t.user_id?t.user_id:t.user_id.toString(),body:t.body,title:t.title,data:t.data})}}},ev=window;!ev.prasi_ext&&(ev.prasi_ext={});let eh=ev.prasi_ext,eg=async e=>{let t=eh[e.site.id];if(!t&&(eh[e.site.id]={status:"init"},t=eh[e.site.id]),"init"===t.status){if(t.status="loading",window.parent!==window){var i;window.addEventListener("message",async e=>{let{data:t}=e;console.log(t),"object"==typeof t&&t.mobile}),i={type:"ready"},window.parent.postMessage({mobile:!0,...i},"*")}await ef(e,t),t.status="ready"}},ey=e=>{var t,i,n;let{}=e,r=(0,a.Og)(m,"VI"),l=(0,a.aU)({tick:Date.now()});if(r.tick=l.tick,eg(r),"ready"!==r.status)return(0,o.jsx)("div",{className:"flex flex-1 flex-col relative",children:(0,o.jsx)(c,{backdrop:!1})});let s=!!(null===(t=r.layout)||void 0===t?void 0:t.entry)&&r.layout.entry.length>0,d=r.entry;return s&&(null===(i=r.layout)||void 0===i?void 0:i.entry)&&(d=null===(n=r.layout)||void 0===n?void 0:n.entry),(0,o.jsx)("div",{className:"flex flex-1 flex-col relative",children:Array.isArray(d)&&d.map(e=>{var t;let i=s?null===(t=r.layout)||void 0===t?void 0:t.meta[e]:r.meta[e];return i?(0,o.jsx)(v,{children:(0,o.jsx)(ec,{meta:i,is_layout:s,depth:0})},i.item.id):null})})},e_=window;!e_.prasi_internal&&(e_.prasi_internal={page:{id:""}});let ew=e=>{let{meta:t,entry:i,api_url:n,site_id:l,api:s,mode:d,db:p,visit:c,script:f,preloaded:h,page_id:g,render_stat:y,on_status_changed:_,on_preload:w,layout:b,comp_load:x}=e,j=(0,a.Og)(m,"VI");return j.mode=d,j.entry=i,j.on_preload=w,j.comp.load=x,g&&(e_.prasi_internal.page.id=g),e_.siteurl=(e,t)=>{if(e.startsWith("http://")||e.startsWith("https://"))return e;try{["prasi.avolut.com"].includes(location.hostname)||"4550"===location.port?j.site.api_url&&!j.site_url&&(j.site_url=new URL(j.site.api_url)):!j.site_url&&(t&&j.site.api_url?j.site_url=new URL(j.site.api_url):j.site_url=new URL(location.href),j.site_url.pathname="")}catch(e){}if(j.site_url){let t=j.site_url,i=e;return!i.startsWith("/")&&(i="/"+i),e_.prasiContext.siteUrl&&(i=e_.prasiContext.siteUrl(i)),`${t.protocol}//${t.host}${i}`}return e},e_.isMobile="mobile"===d,e_.isDesktop="desktop"===d,e_.preloaded=h||(e=>{}),e_.preload=(e,t)=>{if(j.on_preload)return new Promise(i=>{!j.page.navs[g]&&(j.page.navs[g]=new Set);let o=j.page.navs[g],n=!0;for(let t of"string"==typeof e?[e]:e)!o.has(t)&&(o.add(t),n=!1);if(n)i();else{var r;j.page.preload.push(i),null===(r=j.on_preload)||void 0===r||r.call(j,{urls:Array.from(j.page.navs[g]),opt:{on_load:function(){for(var e,i=arguments.length,o=Array(i),n=0;n<i;n++)o[n]=arguments[n];for(let i of(null==t||null===(e=t.on_load)||void 0===e||e.call(t,...o),j.page.preload))i();j.page.preload=[],j.render()}}})}})},j.layout=b,j.page.cur.id=g,j.on_status_changes=_,"disabled"===y&&(ep.enabled=!1),j.meta!==t&&(j.meta=t),f&&(j.script.init_local_effect=f.init_local_effect),j.visit=c,"init"===j.status&&(j.site.db=p,j.site.api=s,u(j,{api_url:n,site_id:l})),w&&(0,r.useEffect)(()=>{setTimeout(()=>{let e=j.page.navs[j.page.cur.id];e&&w({urls:Array.from(e),opt:{on_load(e){}}})},500)},[j.page.cur.id]),(0,o.jsx)(v,{children:(0,o.jsx)(r.Suspense,{children:(0,o.jsx)(ey,{})})})};var eb=i("6223");let ex=async(e,t)=>{let i=eb.u.comp;for(let i of e)i&&"text"!==i.type&&ej(i,t);let o=Object.keys(i.pending);if(o.length>0)try{let e=await (await fetch(eb.u.url`_prasi/comp`,{method:"POST",body:JSON.stringify({ids:[...o]})})).json();for(let[t,o]of Object.entries(e))delete i.pending[t],i.list[t]=o,await (0,n.t8)(`comp-${t}`,o);if(Object.keys(i.pending).length>0){console.error(`Warning: component not found: ${Object.keys(i.pending)}`);return}await ex(Object.values(e))}catch(e){console.error(e)}},ej=(e,t)=>{let i=eb.u.comp;if("item"===e.type){var o,n,r,l;let a=null===(o=e.component)||void 0===o?void 0:o.id;if(a){if(!i.list[a]&&!i.pending[a]&&(i.pending[a]=[]),i.pending[a]&&!i.pending[a].find(t=>t.id===e.id)&&i.pending[a].push(e),i.pending[a]&&i.list[a]){for(let e of i.pending[a])for(let i of Object.values((null===(r=e.component)||void 0===r?void 0:r.props)||{}))i.content&&ej(i.content,t);delete i.pending[a]}if(null===(n=e.component)||void 0===n?void 0:n.props)for(let i of Object.values((null===(l=e.component)||void 0===l?void 0:l.props)||{}))i.content&&ej(i.content,t)}}if(e.childs)for(let i of e.childs)i&&"text"!==i.type&&ej(i,t)},e$={},ek=e=>"object"==typeof e$[e]?e$[e]:(e$[e]=new Promise(async t=>{let i=!1,o=await (0,n.U2)(`page-${e}`);o&&(t(o),i=!0);let r=await (await fetch(eb.u.url`_prasi/page/${e}`)).json();!r.root&&r.content_tree&&(r.root=r.content_tree,delete r.content_tree),!i&&t(r)}),e$[e]),eO=e=>new Promise(async t=>{let i={},o=[...new Set(e)],r=!0;for(let e of o){let t=await (0,n.U2)(`page-${e}`);if(t)i[e]=t;else{r=!1;break}}r&&t(i);let l=await (await fetch(eb.u.url`_prasi/pages`,{method:"POST",body:JSON.stringify({ids:o})})).json();!r&&t(l)}),eS=async e=>{let t=e.map(e=>{var t;return null===(t=eb.u.route.router)||void 0===t?void 0:t.lookup(e)}).filter(e=>e&&e.id);return await eO(t.map(e=>null==e?void 0:e.id))};var eR=i("2234"),eI=i.n(eR);let eA=()=>{let e=eb.u;if(e.site.id){if(!e.mode&&e.site.responsive){if("mobile-only"!==e.site.responsive&&"desktop-only"!==e.site.responsive){let t=eI()();e.mode="mobile"===t.device.type?"mobile":"desktop"}else"mobile-only"===e.site.responsive?e.mode="mobile":"desktop-only"===e.site.responsive&&(e.mode="desktop")}localStorage.getItem("prasi-editor-mode")&&(e.mode=localStorage.getItem("prasi-editor-mode"))}};var eN=i("4072"),eC=i.n(eN),eE=i("904");BigInt.prototype.toJSON=function(){return"BigInt::"+this.toString()};let eP="undefined"!=typeof window?window:null,eT=void 0!==i.g?i.g:void 0,eB=async(e,t,i,o)=>{let n={...i},r=null,l=!1,a=null,s=[];if(Array.isArray(t))for(let e of t)e instanceof File&&(s.push(e),l=!0),"function"==typeof e&&(a=e);else t instanceof File&&(l=!0,s.push(t));if(l){let e=new FormData;for(let t of s)e.append(t.name,t);r=e,delete n["content-type"],n.enctype="multipart/form-data;"}else r=JSON.stringify(t),n["content-type"]="aplication/json";let d=new URL(e);if(null!==eP){let e=new URL(location.href),i="";if(i=d.host===e.host||eT&&"function"==typeof eT.server_hook?d.toString():`${e.protocol}//${e.host}/_proxy/${encodeURIComponent(d.toString())}`){if(a)return(await (0,eE.Z)({method:t?"post":void 0,url:i,data:r,onUploadProgress:a})).data;{let e=await fetch(i,t?{method:"POST",body:r,headers:n}:void 0),l=await e.text();if(!1===o)return l;try{return JSON.parse(l,eL)}catch(e){return l}}}}let p=await fetch(d,t?{method:"POST",body:r,headers:n}:void 0),c=await p.text();try{return JSON.parse(c,eL)}catch(e){return c}},eL=(e,t)=>"string"==typeof t&&t.startsWith("BigInt::")?BigInt(t.substring(8)):t,eF=e=>{let t=new URL(e);if(null!==eP){let e=new URL(location.href),i="";return i=t.host===e.host||eT&&"function"==typeof eT.server_hook?t.toString():`${e.protocol}//${e.host}/_proxy/${encodeURIComponent(t.toString())}`}return t},eU=async(e,t)=>{let i=eC()(e,"/");await new Promise(e=>{let o=document,n=o.createElement("script");n.onload=async()=>{e()},!localStorage.getItem("api-ts-"+i)&&localStorage.setItem("api-ts-"+i,Date.now().toString());let r=new URL(i),l=new URL(location.href);l.hash="",r.hash="";let a="";r.host!==l.host&&(a="&remote=1"),l.pathname="";let s=eC()(l.toString(),"/");t?n.src=`${s}/_prasi/load.js?url=${i}&v3&dev=1${a}`:n.src=`${s}/_prasi/load.js?url=${i}&v3${a}`,n.onerror=()=>{e()},document.querySelector(`script[src="${n.src}"]`)?e():o.body.appendChild(n)})},eW={},eD=e=>{!F.prasiApi&&(F.prasiApi={});try{let t=new URL(e),i=`${t.protocol}//${t.host}`;return!F.prasiApi[i]&&!eW[i]&&(eW[i]=eU(i,location.hostname.includes("prasi"))),new Proxy({},{get:(e,t)=>{if("_url"===t)return(e,t)=>{let o=new URL(i);o.pathname=e.split("/").filter(e=>e).join("/");let n=new URL(location.href),r="";return r=o.host===n.host||!1===t?o.toString():`${n.protocol}//${n.host}/_proxy/${encodeURIComponent(o.toString())}`};let o=e=>function(){for(var t=arguments.length,o=Array(t),n=0;n<t;n++)o[n]=arguments[n];return new Promise(async(t,n)=>{try{let r=F.prasiApi[i];if(!r&&eW&&"object"==typeof eW[i]&&(await eW[i],r=F.prasiApi[i]),r){if(0===Object.keys(r).length){let n=`${i}/${e}`,r=await eJ(n,o);t(r);return}if("_raw"===e){let e=o[0],n=`${i}${e}`,r=await eJ(n,o.slice(1));t(r);return}if(!r.apiEntry&&(r.apiEntry={}),r.apiEntry&&!r.apiEntry[e]){n(`API ${e.toString()} not found, existing API: 
   - ${Object.keys(r.apiEntry||{}).join("\n   - ")}`);return}let l=r.apiEntry[e].url,a=r.apiEntry[e].args;if(l&&a){if(o.length>0&&a.length>0)for(let[e,t]of Object.entries(o)){let i=a[parseInt(e)];if(!(a&&a.includes(i))||!t||"string"==typeof t||"number"==typeof t)l=(l=l.replace(`:${i}?`,t+"")).replace(`:${i}`,t+"")}let e=`${i}${l}`,n=await eJ(e,o);t(n)}else console.error(`API Not Found: ${e.toString()}`)}else n("Failed to load API [Proxy]: "+i)}catch(e){n(e)}})};return"then"===t?new Proxy({},{get:(e,t)=>o(t)}):o(t)}})}catch(e){return null}},eJ=async(e,t)=>await eB(e,t,{"content-type":"application/json"});var eM=i("675"),eV=i.n(eM),ez=i("839"),eq=i("5226");let eH={tables:{},columns:{},rels:{}},eZ={},eG=e=>(!eZ[e]&&eK({table:"check",action:"check"},e).then(t=>{t&&"encrypted"===t.mode?eZ[e]="msgpack":eZ[e]="json"}),new Proxy({},{get:(t,i)=>"_batch"===i?{update:async t=>eK({name:"",action:"batch_update",table:"",params:{batch:t}},e),upsert:async t=>eK({name:"",action:"batch_upsert",table:"",params:{arg:t}},e)}:"_schema"===i?{tables:async()=>(!eH.tables[e]&&(eH.tables[e]=eK({name:"",action:"schema_tables",table:"",params:[]},e)),await eH.tables[e]),columns:async t=>(!eH.columns[e+"_"+t]&&(eH.columns[e+"_"+t]=eK({name:"",action:"schema_columns",table:t,params:[]},e)),await eH.columns[e+"_"+t]),rels:async t=>(!eH.rels[e+"_"+t]&&(eH.rels[e+"_"+t]=eK({name:"",action:"schema_rels",table:t,params:[]},e)),await eH.rels[e+"_"+t])}:i.startsWith("$")?function(){for(var t=arguments.length,o=Array(t),n=0;n<t;n++)o[n]=arguments[n];let r=ez.ZP.gzip(JSON.stringify(o));return eK({name:"",action:"query",table:i,params:btoa(r.reduce((e,t)=>e+String.fromCharCode(t),""))},e)}:new Proxy({},{get:(t,o)=>async function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return"query"===i&&(i=o,o="query"),await eK({name:"",action:o,table:i,params:n},e)}})})),eX={},eK=async(e,t)=>{let i=new URL(t);i.pathname="/_dbs";let o=e||{};o.table&&(i.pathname+=`/${o.table}`);let r=i.toString();"undefined"!=typeof localStorage&&localStorage.mlsid&&(o.mlsid=localStorage.mlsid);let l=eV()({...o,dburl:t}),a=!1;"undefined"!=typeof location&&i.hostname!==location.hostname&&window.isEditor&&["prasi.avolut.com","localhost:4550","127.0.0.1:4550"].includes(location.host)&&(a=!0);let s=async()=>{let e=o,i=null;if("msgpack"===eZ[t]){e=(0,ez.iv)((0,eq.P2)(o),{});let t=await fetch(eF(r),{method:"POST",body:e});i=await t.json()}else i=await eB(r,e,{"content-type":"application/json"},!1);try{if("string"==typeof i)return JSON.parse(i)}catch(e){}return i};if(a){let e=await (0,n.U2)(`editor-db-cache-${l}`);return e?!eX[l]&&(s().then(e=>{(0,n.t8)(`editor-db-cache-${l}`,e)}),eX[l]=!0):(e=await s(),eX[l]=!0,(0,n.t8)(`editor-db-cache-${l}`,e)),e}return await s()},eQ=e=>{let{item:t,item_comp:i,ids:o}=e,n=(0,a.I8)(i);if(eY(n,o),t.id&&(n.id=t.id),n.hidden=t.hidden,n.component){var r,l;if(n.component.props&&t.component&&t.component.props)for(let e of Object.keys(n.component.props)){let i=t.component.props[e],o=n.component.props[e];i&&(o.value=i.value,o.valueBuilt=i.valueBuilt,o.jsxCalledBy=i.jsxCalledBy,o.content=i.content)}n.component.instances=null===(r=t.component)||void 0===r?void 0:r.instances,n.component.style=null===(l=t.component)||void 0===l?void 0:l.style}for(let e of Object.keys(t))delete t[e];for(let[e,i]of Object.entries(n))t[e]=i},eY=(e,t)=>{if(e.originalId=e.id,!t[e.id]&&(t[e.id]=(0,N.createId)()),e.id=t[e.id],e.childs)for(let i of e.childs)eY(i,t)},e0=e=>{var t,i;for(let[o,n]of Object.entries((null===(t=e.item_comp.component)||void 0===t?void 0:t.props)||{}).sort((e,t)=>e[1].idx-t[1].idx)){let t=(0,a.I8)(n),r=null===(i=e.item.component)||void 0===i?void 0:i.props;r&&r[o]&&(t.value=r[o].value,t.valueBuilt=r[o].valueBuilt,r[o].content&&(t.content=r[o].content)),t&&e.each(o,t)}},e1=e=>{let t={};for(let[i,o]of Object.entries(e))if("childs"===i){if(t.childs=[],o&&Array.isArray(o))for(let e of o)"item"===e.type&&e.component?t.childs.push(e):t.childs.push({name:e.name,id:e.id,originalId:e.originalId})}else t[i]=o;return t},e2=(e,t)=>{var i,o,n,r,l,a,s,d,p,c;let{item:u}=t;if("item"===u.type&&(null===(i=u.component)||void 0===i?void 0:i.id)&&(null===(o=t.parent)||void 0===o?void 0:o.item.id)){let i=e.comps[u.component.id];if((null===(n=e.on)||void 0===n?void 0:n.visit_component)&&e.on.visit_component(u,t.root||t.item),!i)return;if(i){let o;if("page"===e.mode?(!u.component.instances&&(u.component.instances={}),o=u.component.instances):o=null===(p=t.parent)||void 0===p?void 0:p.root_instances,o){let e=o[u.id];!o[u.id]&&(o[u.id]={},e=o[u.id]),eQ({item:u,item_comp:i,ids:e})}let n={item:e1(u),jsx_prop:t.jsx_prop,parent:{id:t.parent.item.id,comp_id:null===(a=t.parent)||void 0===a?void 0:null===(l=a.comp)||void 0===l?void 0:null===(r=l.component)||void 0===r?void 0:r.id,instance_id:null===(s=t.parent)||void 0===s?void 0:s.instance_id},instances:o};if((null===(d=e.on)||void 0===d?void 0:d.visit)&&e.on.visit(n,u,t.root||t.item),u.id&&!1!==e.set_meta&&(e.meta[u.id]=n),e0({item:u,item_comp:i,instance:o?o[u.id]:{},each(r,l){var a,s;let d=null===(a=u.component)||void 0===a?void 0:a.id;(null===(s=l.meta)||void 0===s?void 0:s.type)==="content-element"&&d&&l.content&&(l.content.name=r,e5({...e},{item:l.content,root:t.root||l.content,is_root:!1,jsx_prop:{is_root:!0,comp_id:d,name:r},parent:{item:n.item,instance_id:u.id,comp:i,root_instances:o}}))}}),u.childs)for(let n of Object.values(u.childs))(null==n||null===(c=n.name)||void 0===c||!c.startsWith("jsx:"))&&n&&Object.keys(n).length>3&&e5({...e,mode:"comp"},{item:n,is_root:!1,root:t.root||t.item,parent:{item:u,instance_id:u.id,root_instances:o,comp:i}})}}},e5=(e,t)=>{var i,o,n,r,l,a,s,d,p,c;let u=t.item;if("item"===u.type&&(null===(i=u.component)||void 0===i?void 0:i.id)&&!0!==t.ignore_first_component){e2(e,t);return}let m={item:e1(u),parent:{id:(null===(o=t.parent)||void 0===o?void 0:o.item.id)||"root",instance_id:null===(n=t.parent)||void 0===n?void 0:n.instance_id,comp_id:null===(a=t.parent)||void 0===a?void 0:null===(l=a.comp)||void 0===l?void 0:null===(r=l.component)||void 0===r?void 0:r.id}};if(t.jsx_prop&&(m.jsx_prop=t.jsx_prop),(null===(s=e.on)||void 0===s?void 0:s.visit)&&e.on.visit(m,u,t.root||t.item),u.id&&!1!==e.set_meta&&(e.meta[m.item.id]=m),u.childs){for(let[i,o]of Object.entries(u.childs))if(o.id){let i={item:o,is_root:!1,root:t.root||t.item,parent:{item:m.item,instance_id:null===(d=t.parent)||void 0===d?void 0:d.instance_id,comp:null===(p=t.parent)||void 0===p?void 0:p.comp,root_instances:null===(c=t.parent)||void 0===c?void 0:c.root_instances}};t.jsx_prop&&(i.jsx_prop={...t.jsx_prop,is_root:!1}),e5(e,i)}}},e3={route:null,promise:null},e4=()=>{if(e3.promise)return e3.promise;e3.promise=new Promise(async e=>{e3.route&&e(e3.route);let t=await fetch(eb.u.url`_prasi/route`);!t.headers.get("content-encoding")&&fetch(eb.u.url`_prasi/compress/only-gz`),e3.route=await t.json(),e(e3.route)})},e7=async()=>{let e=(0,C.p7)(),t=[];try{let i=await e4();if(i&&i.site&&i.urls){i.layout&&(eb.u.layout.id=i.layout.id,eb.u.layout.root=i.layout.root,eb.u.layout.meta={},eb.u.layout.root&&(await ex(eb.u.layout.root.childs),e9(eb.u.layout.meta,eb.u.layout.root))),eb.u.site=i.site,eb.u.site.code={mode:"vsc"},await e8(),eb.u.site.api=eD(eb.u.site.api_url),eb.u.site.db=eG(eb.u.site.api_url);let o=window;for(let n of(o.serverurl=eb.u.site.api_url,o.db=eb.u.site.db,o.api=eb.u.site.api,i.urls))e.insert(n.url,n),t.push(n)}}catch(e){}return{router:e,pages:t}},e8=()=>new Promise(e=>{let t=document,i=t.createElement("script");i.onload=async()=>{e()};let o=eb.u.site.api_url;"*"===o&&(o=`${location.protocol}//${location.host}`,eb.u.site.api_url=o),o=eC()(o,"/"),!localStorage.getItem("api-ts-"+o)&&localStorage.setItem("api-ts-"+o,Date.now().toString());let n=new URL(location.href);if(n.pathname="",o&&(["prasi.avolut.com"].includes(n.hostname)||"4550"===n.port))i.src=`${o}/_prasi/load.js?url=${o}&v3`;else{n.hash="";let e=eC()(n.toString(),"/");i.src=`${e}/_prasi/load.js?url=${e}&v3`,eb.u.site.api_url=`${n.protocol}//${n.host}`}i.onerror=()=>{e()},document.querySelector(`script[src="${i.src}"]`)?e():t.body.appendChild(i)}),e9=(e,t)=>{for(let i of t.childs)e5({set_meta:!0,comps:eb.u.comp.list,meta:e,mode:"page"},{item:i})};var e6=i("1654");let te=()=>4===location.hostname.split(".").length||"prasi.app"===location.hostname||"prasi.avolut.com"===location.hostname||location.hostname.includes("ngrok")||"localhost"===location.hostname||"127.0.0.1"===location.hostname||"10.0.2.2"===location.hostname,tt=()=>{var e;let t=(0,a.aU)({page_id:""}),[i,s]=(0,r.useState)({}),p=()=>s({});e6.w.prasiContext.render=p;let u=a.kn.Provider,m=te()&&location.pathname.startsWith("/prod");if("ready"!==eb.u.route.status||(null===(e=eb.u.route.router)||void 0===e?void 0:e.ctx.rootNode.children.size)===0)return"loading"!==eb.u.route.status&&(eb.u.route.status="loading",e7().then(async e=>{let{router:t,pages:i}=e;eA(),eb.u.route.status="ready",eb.u.route.router=t,eb.u.route.pages=i;let o=e6.w._prasi.basepath,n=`${o.endsWith("/")?o:`${o}/`}_prasi/code/index.js`,r=new URL(location.href);n.startsWith("/")&&(n=`${r.protocol}//${r.host}${n}`);let l=Function("callback",`import("${n}").then(callback)`);await new Promise(e=>{l(t=>{for(let[e,i]of Object.entries(t))e6.w[e]=i;e()})}),p()})),(0,o.jsx)(c,{});let f=eb.u.route.router;if(!f)return(0,o.jsx)(d,{children:"Failed to create Router"});let v="";if(m){let e=location.pathname.split("/");(0,l.Z)(e[3])&&(v=e[3])}let h=null,g=null;if(e6.w._prasi.page_id)f.insert(eb.u.pathname,{id:e6.w._prasi.page_id,url:eb.u.pathname}),h={id:e6.w._prasi.page_id,url:"",params:e6.w._prasi.params},e6.w._prasi.routed={page_id:e6.w._prasi.page_id,params:e6.w._prasi.params},delete e6.w._prasi.page_id,delete e6.w._prasi.params;else{if(h=f.lookup(eb.u.pathname),v){let e=eb.u.route.pages.find(e=>v===e.id);e&&(h=e)}h&&e6.w._prasi.routed&&e6.w._prasi.routed.page_id===h.id&&e6.w._prasi.routed.params&&(h.params=e6.w._prasi.routed.params)}if(!h)return console.error("Page Not Found:",h,eb.u),(0,o.jsx)(d,{children:"Page Not Found"});h.id!==t.page_id&&(eb.u.init_local_effect={}),e6.w.params=h.params||{},eb.u.page.id=h.id,eb.u.page.url=h.url;let y=eb.u.page.cache[h.id];if(!y)return ek(h.id).then(async e=>{let{root:t}=e;if(h){let e={id:h.id,url:h.url,root:t,meta:{}};await ex(t.childs,!0),e9(e.meta,t),eb.u.page.cache[e.id]=e,p()}}).catch(()=>{p()}),(0,o.jsx)(c,{note:"Loading page"});eb.u.page.root=y.root,eb.u.page.meta=y.meta;let _="";return"mobile"===eb.u.page.root.responsive||"mobile"===eb.u.mode?(eb.u.mode="mobile",_=css`
      @media (min-width: 1280px) {
        border-left: 1px solid #ccc;
        border-right: 1px solid #ccc;
        width: 375px;
        top: 0px;
        overflow-x: hidden;
        overflow-y: auto;
        bottom: 0px;
      }
      @media (max-width: 1279px) {
        left: 0px;
        right: 0px;
        top: 0px;
        bottom: 0px;
        overflow-y: auto;
      }
    `):"desktop"===eb.u.page.root.responsive&&(eb.u.mode="desktop"),(0,o.jsx)(u,{value:e6.w.prasiContext,children:(0,o.jsx)("div",{className:cx("relative flex flex-1 items-center justify-center"),onPointerLeave:()=>{e6.w.pointerActive=!1},onPointerEnter:()=>{e6.w.pointerActive=!0},children:(0,o.jsx)("div",{className:cx("absolute flex flex-col items-stretch flex-1 bg-white main-content-preview","mobile"===eb.u.mode?_:"inset-0 overflow-auto",css`
              contain: content;
            `),children:(0,o.jsx)(ew,{api_url:eb.u.site.api_url,entry:Object.values(eb.u.page.root.childs).filter(e=>e).map(e=>e.id),meta:eb.u.page.meta,mode:eb.u.mode,page_id:eb.u.page.id,site_id:eb.u.site.id,db:eb.u.site.db,api:eb.u.site.api,preloaded:e=>{var t;let i=null===(t=eb.u.route.router)||void 0===t?void 0:t.lookup(e);return!!i&&!!eb.u.page.cache[i.id]||!1},comp_load:async e=>{let t=eb.u.comp;if(t.list[e])return t.list[e];try{let i=await (await fetch(eb.u.url`_prasi/comp`,{method:"POST",body:JSON.stringify({ids:[e]})})).json();for(let[e,o]of Object.entries(i))delete t.pending[e],t.list[e]=o,await (0,n.t8)(`comp-${e}`,o)}catch(e){}return t.list[e]},layout:eb.u.layout.id&&eb.u.layout.root&&eb.u.layout.meta?{id:eb.u.layout.id,meta:eb.u.layout.meta,entry:Object.values(eb.u.layout.root.childs).filter(e=>e).map(e=>e.id)}:void 0,script:{init_local_effect:eb.u.init_local_effect},on_preload:async e=>{let{urls:t,opt:i}=e,o=[];if(eb.u.cache.urls)for(let e of t)!eb.u.cache.urls.has(e)&&(o.push(e),eb.u.cache.urls.add(e));if(o.length>0){let e=await eS(o);if((null==i?void 0:i.on_load)&&i.on_load(e,ti),Array.isArray(e))for(let t of e){let e={id:t.id,url:t.url,root:t.root,meta:{}};await ex(t.root.childs),e9(e.meta,t.root),eb.u.page.cache[e.id]=e}}}})})})})},ti=(e,t)=>{for(let i of e)for(let e of i.root.childs)to(e,t)},to=(e,t)=>{if(t(e),"text"!==e.type){var i;if("item"===e.type&&(null===(i=e.component)||void 0===i?void 0:i.props))for(let i of Object.values(e.component.props))i.content&&to(i.content,t);for(let i of e.childs)to(i,t)}}},1654:function(e,t,i){"use strict";i.d(t,{w:function(){return o}});let o=window}},t={};function i(o){var n=t[o];if(void 0!==n)return n.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,i),r.exports}i.m=e,i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},i.f={},i.e=function(e){return Promise.all(Object.keys(i.f).reduce(function(t,o){return i.f[o](e,t),t},[]))},i.u=function(e){return"static/js/async/"+e+"."+({326:"f4508f4f",719:"37fdf3c1"})[e]+".js"},i.miniCssF=function(e){return"static/css/async/"+e+".45fc275a.css"},i.h=function(){return"edf814351c024d9b"},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},(()=>{var e={};i.l=function(t,o,n,r){if(e[t]){e[t].push(o);return}if(void 0!==n){for(var l,a,s=document.getElementsByTagName("script"),d=0;d<s.length;d++){var p=s[d];if(p.getAttribute("src")==t){l=p;break}}}!l&&(a=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=t),e[t]=[o];var c=function(i,o){l.onerror=l.onload=null,clearTimeout(u);var n=e[t];if(delete e[t],l.parentNode&&l.parentNode.removeChild(l),n&&n.forEach(function(e){return e(o)}),i)return i(o)},u=setTimeout(c.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=c.bind(null,l.onerror),l.onload=c.bind(null,l.onload),a&&document.head.appendChild(l)}})(),i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=[];i.O=function(t,o,n,r){if(o){r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[o,n,r];return}for(var a=1/0,l=0;l<e.length;l++){for(var o=e[l][0],n=e[l][1],r=e[l][2],s=!0,d=0;d<o.length;d++)(!1&r||a>=r)&&Object.keys(i.O).every(function(e){return i.O[e](o[d])})?o.splice(d--,1):(s=!1,r<a&&(a=r));if(s){e.splice(l--,1);var p=n();void 0!==p&&(t=p)}}return t}})(),i.p="/",i.rv=function(){return"1.0.3"},(()=>{if("undefined"!=typeof document){var e=function(e,t,o,n,r){var l=document.createElement("link");return l.rel="stylesheet",l.type="text/css",i.nc&&(l.nonce=i.nc),l.onerror=l.onload=function(i){if(l.onerror=l.onload=null,"load"===i.type)n();else{var o=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.href||t,s=Error("Loading CSS chunk "+e+" failed.\\n("+a+")");s.code="CSS_CHUNK_LOAD_FAILED",s.type=o,s.request=a,l.parentNode&&l.parentNode.removeChild(l),r(s)}},l.href=t,o?o.parentNode.insertBefore(l,o.nextSibling):document.head.appendChild(l),l},t=function(e,t){for(var i=document.getElementsByTagName("link"),o=0;o<i.length;o++){var n=i[o],r=n.getAttribute("data-href")||n.getAttribute("href");if("stylesheet"===n.rel&&(r===e||r===t))return n}for(var l=document.getElementsByTagName("style"),o=0;o<l.length;o++){var n=l[o],r=n.getAttribute("data-href");if(r===e||r===t)return n}},o={980:0};i.f.miniCss=function(n,r){if(o[n])r.push(o[n]);else if(0!==o[n]&&({326:1})[n]){var l;r.push(o[n]=(l=n,new Promise(function(o,n){var r=i.miniCssF(l),a=i.p+r;if(t(r,a))return o();e(l,a,null,o,n)})).then(function(){o[n]=0},function(e){throw delete o[n],e}))}}}})(),(()=>{var e={980:0};i.f.j=function(t,o){var n=i.o(e,t)?e[t]:void 0;if(0!==n){if(n)o.push(n[2]);else{var r=new Promise(function(i,o){n=e[t]=[i,o]});o.push(n[2]=r);var l=i.p+i.u(t),a=Error();i.l(l,function(o){if(i.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var r=o&&("load"===o.type?"missing":o.type),l=o&&o.target&&o.target.src;a.message="Loading chunk "+t+" failed.\n("+r+": "+l+")",a.name="ChunkLoadError",a.type=r,a.request=l,n[1](a)}},"chunk-"+t,t)}}},i.O.j=function(t){return 0===e[t]};var t=function(t,o){var n=o[0],r=o[1],l=o[2],a,s,d=0;if(n.some(function(t){return 0!==e[t]})){for(a in r)i.o(r,a)&&(i.m[a]=r[a]);if(l)var p=l(i)}for(t&&t(o);d<n.length;d++)s=n[d],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(p)},o=self.webpackChunk=self.webpackChunk||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})(),i.ruid="bundler=rspack@1.0.3";var o=i.O(void 0,["72","361","152"],function(){return i("4871")});o=i.O(o)})();
//# sourceMappingURL=index.0b5aa3da.js.map